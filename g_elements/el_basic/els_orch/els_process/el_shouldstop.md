---
description: Should stop
---

# Должен остановиться

Элемент проверяет, была ли запрошена в Оркестраторе мягкая остановка робота. Результат проверки записывается в виде логического значения в свойство **Результат**. 

Данный элемент позволяет RPA-разработчику настроить процесс таким образом, чтобы робот выполнял различные действия после просьбы остановиться. Например, робот может записать сообщение в журнал, закрыть необходимые окна и приложения и завершить процесс. Если RPA-разработчик не настроил обработку сигнала остановки соответствующим образом, то робот продолжит работу. 


![](<../../../../.gitbook/assets/image (282).png>)

Просьбу остановиться может отправить пользователь или сам Оркестратор:
1. Оркестратор отправляет сигнал автоматически в том случае, если RPA-проект с элементом **Должен остановиться** был запущен по заданию с триггером **Запуск по расписанию** и установленным чекбоксом **Завершение робота** в режиме **Попросить остановиться**. Подробности см. [здесь](https://docs.primo-rpa.ru/primo-rpa/orchestrator/basics/tasks#1.-zapusk-po-raspisaniyu).
2. Пользователь отправляет сигнал вручную в веб-интерфейсе Оркестратора. Чтобы отправить сигнал:
   * Перейдите в раздел Оркестратора **Роботы  > Все Роботы**.
   * В таблице роботов выделите робота, который начал выполнять проект с элементом **Должен остановиться**.
   * Нажмите кнопку **Попросить остановиться** в верхней панели (см. рисунок ниже).

   :bangbang: *Кнопка отображается только во время выполнения проекта.*

 ![](<../../../../.gitbook/assets/ask to stop-2.png>)

В результате срабатывания триггера или действий пользователя в Оркестраторе, робот дойдет до выполнения элемента **Должен остановиться** и запишет в переменную **Результат** значение `true`. Далее робот выполнит тот сценарий обработки сигнала остановки, который пользователь настроил в процессе.


## Свойства
Символ `*` в названии свойства указывает на обязательность заполнения. Описание общих свойств см. в разделе [Свойства элемента](https://docs.primo-rpa.ru/primo-rpa/primo-studio/process/elements#svoistva-elementa).

| Свойство    | Тип     | Описание                                  |  Пример         | 
| ----------- | ------- | ----------------------------------------- | --------------- | 
| Таймаут     | Int32   | Лимит времени операции (мс). Если по истечении лимита операция не выполнена, робот закончит работу с ошибкой | `5000`  |  
| Результат\* | Boolean | Название переменной, в которую запишутся данные из Оркестратора. Интерпретация полученных данных: <p> * `true` — получен сигнал остановки; </p> <p> * `false` — сигнала не было </p> |  | 


## Решение проблем
**Для роботов с версией ниже 23.6.**

Чтобы робот не заканчивал работу с *Ошибкой при обращении к Оркестратору*:
- включите чекбокс **Продолжить при ошибке** в группе общих свойств;
- либо используйте данный элемент в [Try-Catch](https://docs.primo-rpa.ru/primo-rpa/g_elements/el_basic/els_logic/el_logic_trycatch). 
 
**Если версия робота 23.6+**, то чекбокс можно не включать, поскольку эта ошибка стала игнорироваться по умолчанию.


## Пример использования

RPA-проект, демонстрирующий работу элемента, можно найти в нашем публичном репозитории [Learning](https://github.com/PrimoRPA/Learning).

1. Скачайте архив со всеми обучающими материалами по ссылке: [Скачать архив Learning](https://github.com/PrimoRPA/Learning/archive/refs/heads/master.zip).
2. Распакуйте архив и откройте в Студии проект **StudioActivities**.
3. Выберите процесс `StudioActivities/Ru/Оркестратор/Процесс/Должен остановиться.ltw` для просмотра.

## Только код
Пример использования элемента в процессе с типом **Только код (Pure code)**:

{% tabs %}
{% tab title="C#" %}
```csharp
bool ret = LTools.Enterprise.OrchestratorApp.ShouldStop(wf);
```
{% endtab %}

{% tab title="Python" %}
```python
ret = LTools.Enterprise.OrchestratorApp.ShouldStop(wf)
```
{% endtab %}

{% tab title="JavaScript" %}
```javascript
var ret = _lib.LTools.Enterprise.OrchestratorApp.ShouldStop(wf);
```
{% endtab %}
{% endtabs %}

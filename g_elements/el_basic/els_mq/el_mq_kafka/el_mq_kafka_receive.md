# Получить сообщения Kafka

*Eng: Receive message Kafka*

![](<../../../../.gitbook/assets/image (318).png>)

Компонент предназначен для получения сообщений из очереди сервера Kafka. Используется в RPA-процессах для обработки данных, поступающих через Kafka, что позволяет интегрировать процессы и системы, работающие с потоками сообщений.


## Свойства

Символ `*` в названии свойства указывает на обязательность заполнения. Описание общих свойств см. в разделе [Свойства элемента](https://docs.primo-rpa.ru/primo-rpa/primo-studio/process/elements#svoistva-elementa).


| Свойство             | Тип                                                                   | Описание                                              |
| -------------------- | --------------------------------------------------------------------- | ----------------------------------------------------- |
| **Сервер**                   |                                                   |                                                                                           |
| ID группы                      | String                                            | Идентификатор группы.                                                  |
| Адрес сервера\*      | String                                                                | Адрес сервера Kafka (localhost:9092)                  |
| Защищенный пароль              | SecureString                                      | Защищенный пароль для подключения к серверу Kafka.                                        |
| Имя топика/очереди\*           | String                                            | Имя топика или очереди, из которой требуется получить сообщение.                         |
| Логин                          | String                                            | Логин для подключения к серверу Kafka.                                                   |
| Пароль                         | String                                            | Пароль для подключения к серверу Kafka.                                                  |
| Таймаут\*            | Int32                                                                 | Предельное время ожидания завершения процесса (мс)    |
| **Сообщение**                  |                                                   |                                                                                           |
| Массив сообщений     | List <[LTools.Network.MQ.KafkaMessage](../datatypes/kafkamessage.md)> | Массив полученных сообщений                           |
| Ожидать сообщения   | Boolean                                                               |  Указывает, следует ли ожидать поступления новых сообщений от сервера. |
| **SSL**                       |                                                   |    Функция доступна с версии 1.24.8                                                                                       |
| Защищенный пароль ключа        | SecureString                                      | Защищенный пароль для доступа к ключу.                                                    |
| Использовать SSL               | Boolean                                           | Указывает, следует ли использовать SSL для защищенного соединения.                        |
| Механизм                       | String                                            | Механизм SASL для аутентификации (например, PLAIN, SCRAM-SHA-256, SHA-512, Gssapi, OAuth Bearer).                    |
| Пароль ключа                   | String                                            | Пароль для доступа к ключу, используемому для SSL.                                        |
| Проверять сертификат           | Boolean                                           | Указывает, следует ли проверять достоверность сертификата при установлении соединения.    |
| Протокол                       | String                                            | Протокол безопасности, используемый для SSL (например, PLAINTEXT, SSL).              |
| Путь к ключу                   | String                                            | Путь к ключу, который используется для SSL-соединений.                                    |
| Путь к сертификату             | String                                            | Путь к сертификату, который используется для SSL-соединений.                              |
| Хранилища                      | String                                            | Хранилища сертификатов, используемые для SSL-соединений.                                  |
                                                                                        


### Механизмы аутентификации в Kafka:

1. *GSSAPI (Kerberos)*
   -  Использует Kerberos для аутентификации, что является стандартом в крупных корпоративных сетях. GSSAPI предоставляет безопасную и устойчивую аутентификацию, обычно используется в средах, где требуется высокая безопасность. Подробнее на официальном сайте [Kerberos Documentation](https://web.mit.edu/kerberos/)
2. *Plain*
   -  Использует простой текст для передачи имени пользователя и пароля. Это самый простой и часто используемый метод аутентификации, но он менее безопасен по сравнению с другими механизмами. Используется в сценариях, где SSL уже предоставляет достаточный уровень безопасности для передачи учетных данных.
3. *Scram Sha256*
   -  Использует механизм SCRAM с хэшированием пароля с использованием алгоритма SHA-256. SCRAM (Salted Challenge Response Authentication Mechanism) предоставляет более безопасную форму аутентификации по сравнению с Plain. Подходит для случаев, когда нужно повысить безопасность при аутентификации, сохраняя при этом простоту настройки. [SCRAM Mechanisms](https://datatracker.ietf.org/doc/html/rfc5802)
4. *Scram Sha512*
   -  Также использует механизм SCRAM, но с более сильным алгоритмом хэширования SHA-512. Это еще более безопасная версия SCRAM, обеспечивающая высокий уровень защиты паролей. Идеален для сред, где безопасность является приоритетом, и требуется максимальная защита учетных данных.
5. *OAuth Bearer*
   -  Использует токены OAuth для аутентификации. OAuth Bearer является современным механизмом аутентификации, широко применяемым для авторизации и доступа к ресурсам через RESTful API. Подходит для сценариев, где Kafka используется в облачных средах или где уже развернута система OAuth для управления доступом. Подробнее можно ознакомиться в официальной документации [OAuth 2.0 Authorization Framework](https://datatracker.ietf.org/doc/html/rfc6749)

## Только код
Пример использования элемента в процессе с типом **Только код** (Pure code):


{% tabs %}
{% tab title="C#" %}
```csharp
List<LTools.Network.MQ.KafkaMessage> ret = LTools.Network.MqApp.Kafka_Receive("localhost:9092", "login", "password", "topic", "groupId", true, 10000);
```
{% endtab %}

{% tab title="Python" %}
```python
ret = LTools.Network.MqApp.Kafka_Receive("localhost:9092", "login", "password", "topic", "groupId", True, 10000)
```
{% endtab %}

{% tab title="JavaScript" %}
```javascript
var ret = _lib.LTools.Network.MqApp.Kafka_Receive("localhost:9092", "login", "password", "topic", "groupId", true, 10000);
```
{% endtab %}
{% endtabs %}

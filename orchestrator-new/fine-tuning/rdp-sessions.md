## Внешняя поддержка RDP-сессии

В случае когда для работы робота требуется внешняя поддержка RDP-сессии, Оркестратор перед запуском робота запрашивает открытие сессии в сервисе RDP. Процесс открытия RDP-сессии занимает некоторое время. 

Параметры открытия RDP-сессии настраиваются в конфигурационном файле WebApi в секции **RobotStart.AttemptsKeepRDPSessionLevels**:

![](../../../orchestrator-new/resources/fine-tuning/rdp-session.PNG)

В таблице приводится описание параметров открытия RDP-сессии.

| Параметр           | Назначение           | Примечание           | 
| ------------------ | -------------------- | -------------------- |
| AttemptsKeepRDPSessionLevels | Массив пар параметров AttempCount и AttempExpirationInSeconds – уровней стратегии открытия RDP-сессии. Каждый последующий уровень должен иметь большее значение AttempExpirationInSeconds, чем предыдущий | Попытки открыть начинаются с уровня 0 (первый элемент массива). При исчерпании количества попыток происходит переход на следующий уровень, пока уровни не закончатся. Не рекомендуется использовать больше 3-х уровней |
| AttempCount | Количество попыток открытия RDP-сессии в рамках уровня |      |
| AttempExpirationInSeconds | Время задержки (сек) между попытками | Не гарантировано - при наличии многих RDP-пользователей время задержки может отличаться от указанного в настройке |
| WaitUserProfileLoaded | Ожидать загрузки профиля пользователя | Когда RDP-сессия открывается Оркестратором: пока не закончатся попытки AttempCount или пока не загрузится профиль RDP-пользователя. Загрузился ли профиль, проверяется путем опроса машины робота |

:small_orange_diamond: Рекомендуется располагать службу RDP2 на отдельной машине. На машине робота её можно развертывать, если она обслуживает ТОЛЬКО пользовательские сессии на этой машине (автосессии).
# Очереди проектов

При нехватке роботов или лицензий RPA-проекты становятся в очередь проектов. Наблюдать очередь RPA-проектов можно на главной странице. Назначение очереди проектов:
1. Не потерять запуск проекта, отсрочив его запуск. В период этой отсрочки, возможно, в системе появятся свободные роботы, подходящие для выполнения проекта. Подходящий робот – это робот, который может выполнить проект.
2. Если одновременно\* несколько проектов поставлено на выполнение, выбрать на выполнение проект с максимальным приоритетом.

>\* - *Понятие одновременности тут условное. Если проект с меньшим приоритетом встанет в очередь раньше, чем проект с большим приоритетом, но в более ранний временной интервал обслуживания очереди, проект с меньшим приоритетом выйдет из очереди раньше.*

Рекомендуется не допускать возникновения очереди проектов. Если она неизбежна – заведомо возможны ситуации нехватки роботов/лицензий – настроить её на оптимальную работу можно при помощи ряда параметров, непосредственно или косвенно влияющих на работу очереди:

| №п/п | Наименование настройки | Описание | Примечание |
| --- | --- | --- | --- |
| 1. | Приоритет проекта | Задается на форме создания/редактирования проекта. Связан с конкретным проектом | Существует 3 фиксированных приоритета. Определяет, как долго проект будет находиться в очереди задержки, и в каком порядке проекты будут выходить из очереди проектов при одновременном попадании в неё |
| 2. | Время нахождения проекта в очереди задержки (сек.) | Задается в конфигурационном файле Оркестратора для каждого из 3-х приоритетов. Общесистемная настройка | Требуется перезагрузка Оркестратора. Чем меньше проект находится в очереди ожидания, тем чаще для него будет искаться подходящий робот |
| 3. | Время нахождения проекта в очереди приоритетов (мсек.) | Задается в конфигурационном файле Оркестратора. Общесистемная настройка | Небольшая по времени задержка перед основной очередью проектов, которая необходима, чтобы упорядочить по приоритету проекты, запущенные (также пришедшие в очередь из очередей задержек) практически одновременно. Требуется перезагрузка Оркестратора. Чем больше время, тем выше вероятность правильного порядка выхода из очереди проектов в порядке их приоритета |
| 4. | Стратегия очереди проектов | Задается на форме настройки Оркестратора. Общесистемная настройка | Менее ограниченная стратегия позволит для проектов использовать больше роботов для поиска подходящих, уменьшает вероятность очереди |
| 5. | Привязка роботов к RPA-проектам | Задается на форме привязки роботов к RPA-проектам. Связана с конкретным проектом, но может влиять на систему в целом в условиях дефицита роботов или лицензий | Ограничивает множество роботов для поиска подходящих, увеличивает вероятность очереди |
| 6. | Запуск в ограниченном количестве экземпляров | Задается на форме создания/редактирования проекта. Связана с конкретным проектом, но может влиять на систему в целом в условиях дефицита роботов или лицензий | Если задано число, запуск проекта будет пропускаться, пока не завершатся текущие запуски, вероятность очереди уменьшается |
| 7. | Разрешить наложение | Задается на форме создания задания. Связана с конкретным заданием, но может влиять на систему в целом в условиях дефицита роботов или лицензий | Если не установлен этот флаг, запуск проекта задания будет пропускаться, пока не завершится текущий запуск задания, вероятность очереди уменьшается. Иначе задание будет стараться запуститься на другом роботе, и при его отсутствии проект задания встанет в очередь |
| 8. | Не повторять в очереди проектов | Задается на форме создания/редактирования проекта. Связана с конкретным проектом, но может влиять на систему в целом в условиях дефицита роботов или лицензий | Если установлен этот флаг, проект не будет копиться в очереди проектов, соответственно при выходе проекта из очереди каждый раз не потребуются роботы, вероятность очереди уменьшается |
| 9. | Освободить сессию принудительно | Если поднят этот флаг, робот, когда освобождает RDP-сессию, не смотрит на отсутствие признака освобождения RDP-сессии у других роботов. Должна использоваться, когда только один робот освобождает RDP-сессию за собой, чтобы не ломать работу остальных роботов в этой RDP-сессии. Связана с конкретным проектом, но может влиять на систему в целом в условиях дефицита роботов или лицензий |  |
| 10. | Задержка освобождения RDP-сессии (мсек) | RDP-сессия может очень быстро понадобиться другому роботу, чтобы её не пересоздавать заново. Связана с конкретным проектом, но может влиять на систему в целом в условиях дефицита роботов или лицензий |  |
| 11. | Иметь лицензии роботов с запасом | Если одновременно работает N роботов, то необходимо иметь лицензий N + Δ. Δ – запас лицензий | Роботы освобождают лицензии с некоторой задержкой. А в случае, если робот падает, то лицензия и вовсе освобождается по таймауту |

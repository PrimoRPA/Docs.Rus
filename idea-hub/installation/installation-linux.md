# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –º–∞—à–∏–Ω–µ —Å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π Linux (Ubuntu, Debian)

üî∏ –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –Ω–µ —Å–ª–µ–¥—É–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏ –∏–∑ –∞—Ä—Ö–∏–≤–∞ Idea Hub c –ø—Ä–∞–≤–∞–º–∏ **sudo**.

## PHP

–ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ –Ω–∞ —Ü–µ–ª–µ–≤–æ–π –º–∞—à–∏–Ω–µ PHP, –∏ –µ–≥–æ –≤–µ—Ä—Å–∏—é. –≠—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, –≤–≤–µ–¥—è —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:

```
# php --version
```

–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã:
```  
PHP 8.2.5 (cli) (built: May 3 2023 05:10:17) (NTS)  
Copyright (c) The PHP Group  
Zend Engine v4.2.5, Copyright (c) Zend Technologies    
with Zend OPcache v8.2.5, Copyright (c), by Zend Technologies    
with Xdebug v3.2.1, Copyright (c) 2002-2023, by Derick Rethans
```

–ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã –≤—ã–≥–ª—è–¥–∏—Ç –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø—Ä–∏–º–µ—Ä—É, –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º—É –≤—ã—à–µ, –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω PHP –≤–µ—Ä—Å–∏–∏ 8.1 –∏–ª–∏ –≤—ã—à–µ, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫  —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏. 
–ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è PHP –Ω–∏–∂–µ 8.1 –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ –µ–µ, –æ–±–Ω–æ–≤–∏–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:

```
# apt-get install php php-imagick php-pgsql php-fpm php-gd php-xml php-curl php-opcache php-yaml php-devel php-pear php-apcu
```

## PostgreSQL

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ –Ω–∞ —Ü–µ–ª–µ–≤–æ–π –º–∞—à–∏–Ω–µ PostgreSQL:

```
# postgres --version
```
 
–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –∫–æ–º–∞–Ω–¥—ã:
```
postgres (PostgreSQL) 14.3*
```
–ï—Å–ª–∏ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã –≤—ã–≥–ª—è–¥–∏—Ç –ø–æ—Ö–æ–∂–∏–º –æ–±—Ä–∞–∑–æ–º –∏ –≤–µ—Ä—Å–∏—è PostgreSQL >= 13, —Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç—Ç–∞–ø—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏.
–ü—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –Ω–∞ –º–∞—à–∏–Ω–µ PostgreSQL —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–∞–Ω–¥—É

 ```
 # apt-get install postgresql postgresql-contrib
```


## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:

1. –í —Ñ–∞–π–ª–µ `/etc/postgresql/14/main/pg_hba.conf` (–Ω–æ–º–µ—Ä –≤–µ—Ä—Å–∏–∏ —É–∫–∞–∂–∏—Ç–µ —Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ –º–∞—à–∏–Ω–µ) –ø–æ–º–µ–Ω—è–π—Ç–µ —Å—Ç—Ä–æ–∫—É  
```
editorconfig  
local all all peer  
```  
–Ω–∞  
```
editorconfig  
local all all md5
``` 
 
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã  
```
 # service postgresql start
 ```
3. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∏—Å–ø–æ–ª—å–∑—É—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è `postgres`:
```
# sudo -i -u postgres  
# psql
```
4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è PostgreSQL (–≤–º–µ—Å—Ç–æ "password" —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–π –ø–∞—Ä–æ–ª—å):  
```
# postgresql    
# CREATE USER primo_ideahub WITH PASSWORD 'password';
```  
5. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω—É–∂–Ω—ã–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏:  
```
# postgresql    
# CREATE DATABASE ideahub OWNER primo_ideahub;
# GRANT ALL PRIVILEGES ON DATABASE ideahub TO primo_ideahub;    
# CREATE EXTENSION pg_trgm;
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Drush (CLI –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –º–æ–¥—É–ª—å) 

Drush —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –ø—Ä–æ–µ–∫—Ç–∞. –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç—å –µ–≥–æ –∫–æ–º–∞–Ω–¥–æ–π `drush`, –¥–ª—è —ç—Ç–æ–≥–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ
```
# ln -s PROJECT_PATH/vendor/drush/drush/drush /usr/bin/drush
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –†–∞—Å–ø–∞–∫—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∞—Ä—Ö–∏–≤ —Å —Ñ–∞–π–ª–∞–º–∏ IdeaHub –≤ –∫–∞—Ç–∞–ª–æ–≥ `/var/www/DOMAIN_NAME/`
2. –í –∫–∞—Ç–∞–ª–æ–≥–µ `/var/www/DOMAIN_NAME/db` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –¥–∞–º–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö `/var/www/DOMAIN_NAME/db/idea-hub.29062023-16-12-30.sql.gz` (–Ω–∞–∑–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è).
–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö PostgreSQL –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ –∫–æ–º–∞–Ω–¥–æ–π   
```
# gunzip -c /var/www/DOMAIN_NAME/db/idea-hub.29062023-16-12-30.sql.gz | psql -U
# primo_ideahub DATABASE_NAME
```
3. –ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ç–∞–ª–æ–≥ `/var/www/DOMAIN_NAME/db` –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å.
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞ `web/sites/default/files`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `/var/www/DOMAIN_NAME/`  
```
# cd /var/www/DOMAIN_NAME    
# chgrp -Rv www-data web/sites/default/files  
# chmod 2775 web/sites/default/files  
# chmod g+w -R web/sites/default/files  
# chmod 444 web/sites/default/settings.php
```
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞ –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥–∞ `private`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `/var/www/DOMAIN_NAME/`
```
# cd /var/www/DOMAIN_NAME  
# chgrp -Rv www-data private  
# chmod 2775 private  
# chmod g+w -R private
```
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª  `/var/www/DOMAIN_NAME/config/settings.EXAMPLE.php` –≤ `/var/www/DOMAIN_NAME/config/settings.local.php` 
–∏ –∑–∞–º–µ–Ω–∏—Ç–µ –≤ –Ω–æ–≤–æ–º —Ñ–∞–π–ª–µ —Å—Ç—Ä–æ–∫–∏: `HOST`, `DATABASE_NAME`, `USER_NAME`, `PASSWORD` –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –≤–æ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —à–∞–≥–µ 2.   
–í —ç—Ç–æ–º –∂–µ —Ñ–∞–π–ª–µ –Ω–∞–π–¥–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫—É `$settings['trusted_host_patterns']` –∏ —É–∫–∞–∂–∏—Ç–µ –≤ –Ω–µ–π –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º. –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥–æ–π  
```
# cd /var/www/DOMAIN_NAME    
# drush status
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∏–º:  

	Drupal version   : 9.5.10-dev  
	Site URL         : https://ideahub-v2.lndo.site/  
	DB driver        : pgsql  
	DB hostname      : database  
	DB port          : 5432  
	DB username      : postgres  
	DB name          : drupal9  
	Database         : Connected  
	Drupal bootstrap : Successful  
	Default theme    : orcx2  
	Admin theme      : gin  
	PHP binary       : /usr/local/bin/php  
	PHP OS           : Linux  
	PHP version      : 8.2.5  
	Drush script     : /app/vendor/bin/drush  
	Drush version    : 11.7.0-dev  
	Drush temp       : /tmp  
	Drush configs    : /app/vendor/drush/drush/drush.yml  
	Install profile  : standard  
	Drupal root      : /app/web  
	Site path        : sites/default  
	Files, Public    : sites/default/files  
	Files, Private   : ../private  
	Files, Temp      : /tmp  


–ï—Å–ª–∏ —ç—Ç–æ —Ç–∞–∫, —Ç–æ –≤–∞—à —Å–∞–π—Ç —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.

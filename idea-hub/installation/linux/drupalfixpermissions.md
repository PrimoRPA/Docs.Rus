# Скрипт drupal_fix_permissions.sh

Скрипт устанавливает корректные доступы к файлам и каталогам Idea Hub. Для использования скрипта необходим `sudo` доступ. 

Стоит принять во внимание, что если какая-либо папка (private, files или другие) отсутствует, то скрипт не покажет ошибки.

Чтобы воспользоваться скриптом:

1. [Скачайте](https://github.com/Metadrop/drupal-fix-permissions-script/blob/main/drupal_fix_permissions.sh) скрипт.
2. Ознакомьтесь с документацией, встроенной в этот скрипт. Документацию можно посмотреть, если запустить скрипт с параметром `--help`.
   ```
   sudo bash drupal_fix_permissions.sh --help
   ```
3. Определите группу, от которой работает ваш сервер. Зачастую это **www-data** (найдите универсальный способ определения).
4. Желательно, чтобы пользователь, который владеет папкой с проектом, и пользователь, который запускает `cron`, совпадали. Нужно обозначить, что должен быть специальный пользователь, например **ideahub**, от имени которого выполняется и установка, и обновления, и т.п.
5. Основные опции команды:
   - ```-u``` пользователь.
   - ```-g``` группа.
   - ```-f``` путь до папки private из папки `web`.
   - ```-p``` полный путь до папки `web` проекта.

В итоге команда будет иметь вид:
```
sudo bash ./scripts/drupal_fix_permissions.sh -p=/var/www/ideahub/web -u=ideahub -g=www-data -f="../config -f="../private" -sp="../scripts"
```


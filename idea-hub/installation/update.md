# Обновление Idea Hub

## Обновление кода
Перед обновлением:
1. Переведите сайт в режим обслуживания командой  
```
# drush maint:set 1 -y;
```
3. Сделайте дамп базы данных командой  
```
# drush sql:dump --gzip --result-file=path_to_file.sql;    
# pg_dump -h localhost -p 5432 -d ideahub -U postgres -f 4.08IHDB.sql
```
5. Сделайте экспорт конфигурации командой  
```
# drush cex -y;
```
7. Создайте архив каталога `config/sync` и отправьте его команде разработки IdeaHub;
8. Дождитесь получения обновлений от команды разработки.

Обновление:
1. Получите от разработчиков Idea Hub архив с обновлениями, распакуйте его, замените файлы на обновлённые;
2. Импортируйте обновлённую конфигурацию командой  
```
# drush cim -y
```
3. Если возникнут сложности или в логах будут ошибки и предупреждения, скопируйте вывод команды и отправьте разработчикам Idea Hub.

## Обновление импортированных данных, если есть импорт из CSV

1. Перейдите на страницу импортеров `/admin/content/feed`;
2. Выполните обновление в последовательности: User, Queue, Process;
3. Перейдите на страницу поискового индекса `/admin/config/search/search-api/index/process_index`;
4. Нажмите кнопку **Queue all items for reindexing**. В появившемся окне нажмите кнопку **Подтвердить**;
5. Нажмите кнопку **Index Now** и дождитесь завершения процесса.

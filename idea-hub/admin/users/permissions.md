# Управление доступом

В Idea Hub реализована многоуровневая система доступа, которая позволяет:
* **Разграничивать доступ на уровне модулей и функций** — доступ назначается ролям пользователей. Рекомендуется использовать для настройки всех прочих прав, которые не касаются объектов, терминов таксономии и полей процессов. Например, здесь можно настроить права на управление/просмотр учётных записей, которые будут сгруппированы в модуле **User**.
* **Разграничивать доступа к данным, которые носят коммерческий характер:**
  * Доступ на уровне объектов — настройки позволяют гибко назначить разные типы *правил доступа* к таким объектам, как процесс, проект, очередь, робот, машина, лицензия, дашборд.
  * Доступ к терминам словарей таксономии — настройки позволяют гибко назначить разные типы правил доступа к терминам словаря таксономии. Например, ограничить доступ по департаментам. 
  * Доступ на уровне отдельных полей процессов — настройки позволяют гибко назначить разные типы правил доступа к выбранным полям процесса.

**Что такое правила доступа**

Правила доступа управляют разрешениями на следующие операции:
* **Создать** — разрешено создавать объект/термин словаря таксономии/поле процесса.
* **Обновить** — разрешено изменять объект/термин словаря таксономии/поле процесса.
* **Читать** — разрешено просматривать объект/термин словаря таксономии/поле процесса.
* **Удалить** — разрешено удалять объект/термин словаря таксономии/поле процесса.

Существуют следующие типы правил: 
* **Пользователь** (User) — доступ предоставляется выбранному пользователю.
* **Роль** (Role) — доступ предоставляется выбранной роли пользователя. Следует учитывать, что в списке ролей есть общие роли из поставки, например **Авторизованный пользователь** — по умолчанию ею обладают все пользователи, авторизованные в системе, поэтому нет необходимости отдельно назначать такую роль пользователю.
* **То же значение** (SameValue) — доступ предоставляется только тем пользователям, у которых значение конкретного поля из учётной записи совпадает со значением конкретного поля у объекта. Опционально можно выбрать, должны ли совпадать все выбранные значения в этом поле, или хотя бы одно значение. 
* **Термин таксономии выбранный для пользователя** (Taxonomy term by user reference) — это правило используется только для доступа к терминам таксономии. Доступ предоставляется тем пользователям, у которых в выбранном поле указан данный термин. Опционально можно учитывать все дочерние термины, или всё дерево терминов, в котором состоит данный термин.


Для каждой операции можно настроить несколько правил доступа — в этом случае доступ будет предоставляться тем пользователям, кто соответствует хотя бы одному правилу. 

Форма с настройками правил доступа имеет одинаковый вид для объектов, терминов словаря таксономии и полей процессов.


Пользователь с ролью **Администратор** имеет полные права на управление Idea Hub, включая просмотр и настройку разрешений для пользователей. Для него не применяются ограничения прав доступа.


Как это работает:
* если доступ к сущности разрешен хотя бы в одном месте (правах или разрешениях), то доступ будет;
* если доступ запрещен в обоих местах, то доступа не будет.

По умолчанию авторизованный пользователь имеет все права на ноды и термины таксономий. В текущем состоянии: чтение + создание + изменение + редактирование.  Пока предлагаем после установки зайти и настроить вручную.





## Доступ на уровне объектов и словарей таксономии

Администратор может разграничивать доступ к таким объектам, как процесс, проект, очередь, робот, машина, лицензия, дашборд. Кроме того, ему доступна настройка прав доступа к терминам словаря таксономии — например, к терминам словаря департаментов.

Для настройки используются правила доступа, которые определяют разрешённые операции с выбранным объектом или термином словаря. Правила доступа управляют разрешениями на следующие операции:
* **Создать** — разрешено создавать объект/термин словаря таксономии.
* **Обновить** — разрешено изменять объект/термин словаря таксономии.
* **Читать** — разрешено просматривать объект/термин словаря таксономии.
* **Удалить** — разрешено удалять объект/термин словаря таксономии.

Существуют следующие типы правил: 
* **Пользователь** (User) — доступ предоставляется выбранному пользователю.
* **Роль** (Role) — доступ предоставляется выбранной роли пользователя. Следует учитывать, что в списке ролей есть общие роли, например **Авторизованный пользователь** — по умолчанию ею обладают все пользователи, авторизованные в системе, поэтому нет необходимости отдельно назначать такую роль пользователю.
* **То же значение** (SameValue) — доступ предоставляется только тем пользователям, у которых значение выбранного поля совпадает со значением выбранного поля у объекта. Опционально можно выбрать, должны ли совпасть все выбранные значения в этом поле, либо хотя бы одно значение. 
* **Термин таксономии выбранный для пользователя** (Taxonomy term by user reference) — это правило используется только для доступа к терминам таксономии. Доступ предоставляется тем пользователям, у которых в выбранном поле указан данный термин. Опционально можно учитывать все дочерние термины, или всё дерево терминов, в котором состоит данный термин.


Для каждой операции можно настроить несколько правил доступа — в этом случае доступ будет предоставляться тем пользователям, кто соответствует хотя бы одному правилу. Форма с настройками правил доступа имеет одинаковый вид как для объектов, так и для терминов словаря таксономии.



### Настройка доступа к терминам словаря таксономии








## Доступ на уровне полей процессов

Можно настроить доступы к отдельным полям сущности. В т.ч. разделить кто может создавать, кто редактировать, кто только читать. 


## Управление правами доступа



## Управление разрешениями 
Разрешения определяют допустимые операции:
* С объектами Idea Hub. 
* С полями процесса.
* Со словарём таксономии.

По умолчанию просматривать и настраивать разрешения для определённых ролей может только пользователь с ролью **Администратор**. 




### Допустимые операции с объектом
Объектами являются: процесс, проект, очередь, робот, машина, лицензия, дашборд.
* Создание;
* Редактирование любых объектов соответствующего типа;
* Редактирование собственных объектов соответствующего типа;
* Удаление любых объектов соответствующего типа;
* Удаление собственных объектов соответствующего типа;
* Просмотр редакций (*истории правок*) объекта;
* Удаление редакций объекта;
* Восстановление редакций объекта.

Реализовано по отношению к ролям.

### Допустимые операции со словарём таксономии
* Добавить термины
* Удалять термины
* Редактировать термины

Реализовано по отношению к ролям.

### Допустимые операции с полями процесса
Видимость и доступы поля:
* Не установлено. Поле наследует разрешения контента.
* Скрытое. Только автор и администраторы могут видеть и редактировать.
* Пользовательские разрешения. Определить пользовательские разрешения для данного поля.
* Пользовательские разрешения PRIMO. Определить пользовательские разрешения для данного поля:
  * Изменить значение поля
  * Просмотр значения поля
  * Просмотр значения поля по отделу - ??? 


---------------







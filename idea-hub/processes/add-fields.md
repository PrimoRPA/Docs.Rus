# Управление полями

В Idea Hub существует возможность добавить произвольное количество полей, которые также могут быть экспортированы/импортированы в файте `process.xlsx` при указании соответствующих настроек. По умолчанию продукт уже содержит некоторый предустановленный набор полей, но в зависимости от потребностей организации он может быть расширен.

## Добавить поле

Для добавления новых полей используйте пункт административного меню **Структура > Типы материалов**.

![Структура > Типы материалов](<../../.gitbook/assets1/idea-hub/add-fields-menu.png>)

Далее нажмите кнопку **Управление полями** для того типа материала, для которого необходимо добавить поле. Например, на рисунке ниже в качестве материала выбран бизнес-процесс.

![Управление полями процесса](<../../.gitbook/assets1/idea-hub/control-fields.png>)

Откроется страница **Управление полями** со списком всех полей, которые существуют на текущий момент для данного типа материала. В правом верхнем углу страницы расположена кнопка **Добавить поле**.

![Кнопка Добавить поле](<../../.gitbook/assets1/idea-hub/add-fields-button.png>)

При нажатии на кнопку откроется страница **Добавить поле**. Выберите тип данных нового поля или выберите одно из существующих полей из выпадающего списка.

![Форма добавления поля](<../../.gitbook/assets1/idea-hub/add-fields-form.png>)

Добавленное поле появится в списке на странице **Управление полями**.

## Изменить поле

Чтобы изменить настройки поля, нажмите кнопку **Изменить** напротив названия поля в списке.

![Кнопка Изменить](<../../.gitbook/assets1/idea-hub/change-field.png>)

Откроется страница **Настройки поля**. Основные настройки данной формы являются общими и не зависят от выбранного типа поля.

![Настройки поля](<../../.gitbook/assets1/idea-hub/change-form-1.png>)

Различаться может набор настроек в разделе **Настройка импорта/экспорта поля**. Так, для определенных типов полей существует возможность указать, можно ли заполнять поле с помощью импорта файла `process.xslx`. 

К таким типам полей относятся: datetime, file, entity_reference, integer, decimal, float, string, string_long, text_with_summary, workflow, formula.

Для того, чтобы добавить поле в шаблон файла `process.xlsx` для импорта/экспорта, активируйте переключатель **Включить импорт/экспорт поля**:

![Настройка импорта/экспорта поля](<../../.gitbook/assets1/idea-hub/change-field-form-2.png>)

Переключатель **Сделать прописной буквой первый символ в строке** определяет, нужно ли первую букву значения поля менять на заглавную, если она была строчной.

Текстовое поле **Инструкция по заполнению** предназначено для указания краткой инструкции о том, как данное поле должно заполняться в файле `process.xlsx`. Эта инструкция будет показываться при наведении курсора мыши на заголовок соответствующей колонки в экспортированном файле. 

Кроме того, в данном разделе формы можно выбрать тип обработчика для импортируемых данных. Это нужно для корректного преобразования данных, полученных из файла при импорте. Набор возможных типов обработчиков зависит от типа поля.

Для типа поля `file` форма также содержит настройку **Изменить поведение, если файл уже существует**. С помощью этой настройки определяется, каким должно быть поведение функциональности в случае, если файл с таким именем уже существует в системе:
* Заменить — заменит существующий файл новым.
* Переименовать — файл будет переименован так, чтобы имя было уникальным.
* Использовать существующий файл.

## Справочно: Типы полей и их настройки

Тип поля: `datetime`\
Плагин: Date\
Настройка: Результирующий формат даты. В большинстве случаев  менять настройку данного поля  не требуется. Если такая необходимость возникает, задаётся в формате, детально описанном [здесь](https://www.php.net/manual/datetime.format.php#refsect1-datetime.format-parameters).


Тип поля: `file`\
Плагин: Download and Create File\
Настройка: Поведение, если файл в системе уже существует. Заменить файл на новый, переименовать новый файл, чтобы имя стало уникальным, либо использовать уже существующий файл, новый — игнорировать.


Тип поля: `entity_reference`\
Плагин: New entity\
Настройки: нет.\
Плагин: Existing entity\
Настройки:
- Имя поля (машинное имя поля), по которому искать существующую связанную сущность.
- Ignore case - игнорировать регистр букв (заглавные или нет)
Плагин: ProjectLookup\
Настройки: Окружение - машинное название поля, из которого берется название окружения запуска роботов.\
Плагин: schedule_lookup\
Настройки: нет.


Типы поля: `integer`, `decimal`, `float`\
Плагин: Number\
Настройки: нет.


Типы поля: `string`, `string_long`, `text_with_summary`\
Плагин: Text\
Настройки: нет.


Тип поля: `workflow`\
Плагин: Workflow\
Настройки: нет.


Тип поля: `formula`\
Плагин: Formula\
Настройки: нет.



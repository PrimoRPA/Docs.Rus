# Управление лицензиями

Primo RPA AI Server — лицензированный сервис платформы Primo RPA. Лицензированию подлежат такие части сервиса, как:
* Primo RPA AI Server — компоненты для машины сервера.
* Агент Primo RPA AI Server — компоненты для целевой машины, на которой будут работать нейросетевые модели.

Это означает, что для полноценной работы с сервисом необходимо запросить у вендора оба типа лицензий. Количество лицензий каждого типа определяется:
* Количеством тенантов — для каждого тенанта в Primo RPA AI Server требуется своя отдельная лицензия. Если вы планируете использовать только тенант по умолчанию, значит, вам будет достаточно одной лицензии с типом Primo RPA AI Server.
* Количеством одновременно работающих агентов — на одной целевой машине должен быть установлен только один агент. Свободная лицензия привязывается к агенту, к которому в первую очередь поступил запрос на инференс. Агент освобождает лицензию только после того, как администратор отключил целевую машину с лицензированным агентом.

Лицензии вправе запросить только пользователь с ролью Administrator. Запрос осуществляется на странице **Настройки > Лицензии**. 

![](<../../../.gitbook/assets1/primo-ai/licenses.png>)

### Порядок получения лицензии 
Чтобы получить и использовать лицензии:
1. Сформируйте текстовый запрос на лицензию на странице **Настройки > Лицензии**.
1. Отправьте вендору файлы с запросом лицензий на электронную почту.
2. Загрузите полученные лицензии на странице **Настройки > Лицензии**.
3. Если вы используете несколько тенантов — назначьте лицензии для каждого из тенантов. 

Подробнее эти шаги описаны ниже.


## Управление лицензиями

### Запросить лицензию

:large_blue_diamond:***Примечание**. При запросе лицензий исходите из расчета 1 лицензия = 1 тенант.*

1. Перейдите в **Настройки > Лицензии** и нажмите кнопку **Запрос на лицензию**. Откроется форма запроса.
1. В поле **Дата регистрации** выберите дату регистрации запроса. По умолчанию это дата формирования запроса.
1. В поле **Период** выберите срок действия лицензии:
   * *Месяц*
   * *Три месяца*
   * *Год*
   * *Бессрочно*
1. В поле **Количество** укажите количество запрашиваемых лицензий на продукт.
1. В поле **Продукт** выберите тип программного продукта, для которого запрашивается лицензия:
   * *Primo RPA AI Server*
   * *Агент Primo RPA AI Server*
1. Нажмите **Сохранить**.
   
![](<../../../.gitbook/assets1/primo-ai/admin/license-request.png>)

В результате сформируется файл `licensereq-*.txt`, где будет указан программный продукт, привязка к аппаратным характеристикам сервера, с которого формировался запрос, дата начала лицензии и срок ее действия. Данный файл следует отправить вендору на почту License@primo-rpa.ru. 

В ответе придет файл лицензионного ключа с расширением `*.license`, который необходимо загрузить в систему.

### Добавить лицензию

:large_blue_diamond:***Примечание**. По умолчанию лицензия считается выданной на дефолтный тенант.*

1. В разделе **Настройки > Лицензии** нажмите кнопку **Добавить лицензию**.
1. Перетащите файл `*.license` в область для загрузки.
1. Нажмите **Сохранить**.

![](<../../../.gitbook/assets1/primo-ai/licenses-create.png>)

### Выдать лицензию на тенант

:large_orange_diamond:***Важно**. Лицензии между тенантами не делятся, у каждого тенанта свои лицензии. В случае, если лицензия нужна для недефолтного тенанта, вы можете вручную указать тенант для загруженной лицензии.*

1. Перейдите в раздел **Настройки > Лицензии**.
1. В таблице добавленных лицензий найдите запись с валидной лицензией и нажмите значок ☰ для вызова меню действий.
2. Выберите действие **Выдать на тенант**.
3. После чего выберите необходимый тенант и нажмите **Сохранить**.

![](<../../../.gitbook/assets1/primo-ai/licenses-set-tenant.png>)


### Просмотр лицензий

Все загруженные лицензии отображаются в табличной части раздела **Настройки > Лицензии**:

![](<../../../.gitbook/assets1/primo-ai/admin/lisenses-table.png>)

Таблица состоит из полей:
1. **Период** — период действия лицензии.
1. **Дата регистрации** — дата, с которой действует лицензия.
1. **Дата истечения** — дата истечения срока действия лицензии.
1. **Продукт** — программный продукт, на который выдана лицензия.
1. **Количество** — количество лицензий этого типа.
1. **Состояние** — текущий статус лицензий: валидная или невалидная. Срок действия лицензии не влияет на валидность. Лицензия становится невалидной в случае, если:
   * Лицензия выпущена для другого сервера, чем тот, на котором она используется.
   * Когда машина, на которой установлен компонент MachineInfo, изменилась. На текущей стадии реализации сервиса замена лицензий при смене оборудования не предусмотрена.
   * Ключ лицензии неправильный или лицензия с таким ключом уже существует.
   * Лицензия сгенерирована способом, отличающимся от описанного в инструкции.
1. **Действия** — возможные действия с лицензией. Например, выдача лицензии на тенант или скачивание файла лицензии на локальный диск.

### Скачать лицензию

1. Перейдите в раздел **Настройки > Лицензии**.
1. В таблице лицензий найдите нужную запись и нажмите значок ☰ для вызова меню действий.
1. Выберите действие **Скачать**.

![](<../../../.gitbook/assets1/primo-ai/licenses-download.png>)





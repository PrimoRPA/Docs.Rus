# Управление лицензиями

Администратор может сформировать запрос на лицензию, добавить полученную лицензию, выдать лицензию на тенант, просмотреть список лицензий, деактивировать просроченную лицензию, скачать файл лицензии.

## Запросить лицензию

1. Перейдите в раздел **Настройки > Лицензии**.
1. Нажмите кнопку **Запрос на лицензию**. Откроется форма запроса:

   ![Форма запроса лицензии](<../../../.gitbook/assets1/primo-ai/admin/license-request.png>)
   
1. В поле **Дата регистрации** выберите дату регистрации запроса. По умолчанию это дата формирования запроса.
1. В поле **Период** выберите срок действия лицензии: *Месяц* / *Три месяца* / *Год* / *Бессрочно*.
1. В поле **Количество** укажите количество запрашиваемых лицензий на продукт.
1. В поле **Продукт** выберите, для каких программных компонентов запрашивается лицензия:
   * *Primo RPA AI Server* — компоненты для машины сервера. При запросе лицензий исходите из расчета 1 лицензия = 1 [тенант](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/common/access-control#tenanty).
   * *Агент Primo RPA AI Server* — компонент для целевой машины.
1. Нажмите **Сохранить**.
   
В результате сформируется файл `licensereq-*.txt`, где будет указан программный продукт, аппаратные характеристики сервера, с которого формировался запрос, дата начала и срок действия лицензии. Данный файл следует отправить вендору на почту License@primo-rpa.ru. 

В ответе придет файл лицензионного ключа с расширением `*.license`, который необходимо загрузить в систему. По умолчанию лицензия считается выданной на дефолтный тенант. После того, как вы загрузите лицензию в сервис, можно будет указать для нее недефолтный тенант — см. [Выдать лицензию на тенант]().


## Добавить лицензию

1. В разделе **Настройки > Лицензии** нажмите кнопку **Добавить лицензию**.
1. Перетащите файл `*.license` в область для загрузки.
1. Нажмите **Сохранить**.

![Форма загрузки лицензии в сервис](<../../../.gitbook/assets1/primo-ai/licenses-create.png>)

## Выдать лицензию на тенант

В случае, если лицензия требуется для недефолтного тенанта, вы можете вручную указать тенант для загруженной лицензии. Лицензии между тенантами не делятся, у каждого тенанта свои лицензии.

Чтобы указать тенант:
1. Перейдите в раздел **Настройки > Лицензии**.
1. В таблице лицензий найдите запись с валидной лицензией и нажмите значок ☰ для вызова меню действий.
2. Выберите действие **Выдать на тенант**.
3. После чего выберите тенант и нажмите **Сохранить**.

![Действие Выдать на тенант](<../../../.gitbook/assets1/primo-ai/licenses-set-tenant.png>)


## Просмотр лицензий

Все загруженные лицензии отображаются в табличной части раздела **Настройки > Лицензии**:

![Таблица лицензий](<../../../.gitbook/assets1/primo-ai/admin/lisenses-table.png>)

Таблица состоит из полей:
1. **Период** — период действия лицензии.
1. **Дата регистрации** — дата, с которой действует лицензия.
1. **Дата истечения** — дата истечения срока действия лицензии.
1. **Продукт** — программный продукт, на который выдана лицензия.
1. **Количество** — количество лицензий этого типа.
1. **Состояние** — текущий статус лицензий: валидная или невалидная. Срок действия лицензии не влияет на валидность. Лицензия становится невалидной в случае, если:
   * Лицензия выпущена для другого сервера, чем тот, на котором она используется.
   * Когда машина, на которой установлен компонент MachineInfo, изменилась. На текущей стадии реализации сервиса замена лицензий при смене оборудования не предусмотрена.
   * Ключ лицензии неправильный или лицензия с таким ключом уже существует.
   * Лицензия сгенерирована способом, отличающимся от описанного в инструкции.
1. **Действия** — возможные действия с лицензией. Например, выдача лицензии на тенант или скачивание файла лицензии на локальный диск.

## Деактивировать лицензию

Удалить просроченную лицензию нельзя, но можно ее деактивировать. Кнопка деактивации становится доступной только, когда у лицензии истек срок действия. Возможности скрыть деактивированные лицензии из интерфейса на текущий момент нет.

1. Перейдите в раздел **Настройки > Лицензии**.
1. В таблице лицензий найдите запись с просроченной лицензией и в столбце **Состояние** нажмите **Деактивировать**.


## Скачать лицензию

1. Перейдите в раздел **Настройки > Лицензии**.
1. В таблице лицензий найдите нужную запись и нажмите значок ☰ для вызова меню действий.
1. Выберите действие **Скачать**.

![Действие Скачать](<../../../.gitbook/assets1/primo-ai/licenses-download.png>)

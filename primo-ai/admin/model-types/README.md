# Управление типами моделей

Тип модели — модель или группа моделей, объединенные общей целью по отношению к изображениям документов. Например, тип модели `passport` предназначен для группировки моделей, цель которых — распознавать данные в изображениях паспортов.

Тип модели важно знать разработчику RPA-проекта, чтобы правильно настроить [запрос на инференс](https://docs.primo-rpa.ru/primo-rpa/g_elements/el_extra/ai_server/createrequest) к серверу AI Server. Тип модели в выступает как ключ маршрутизации запросов инференса, с помощью которых сервер выбирает целевую машину. Например, если в запросе вы указали тип модели `passport`, то сервер направит запрос целевой машине с обученной моделью данного типа. 


## Типы моделей по умолчанию
В системе есть предустановленные типы моделей, которые не нуждаются в дополнительной настройке администратором. Они приведены в таблице ниже.

| Тип модели      | Цель            | Описание         |
| --------------- | --------------- | ---------------- |
| **torg12**      | Распознание     | Модели, распознающие данные в изображениях документов Торг-12 |
| **passport**    | Распознание     | Модели, распознающие данные в изображениях паспортов |
| **snils**       | Распознание     | Модели, распознающие данные в изображениях СНИЛС |
| **classifier**  | Классификация   | Модели, определяющие тип документа по изображению. Данный тип модели классифицирует изображения по трем типам документов: паспорт, СНИЛС, Торг-12 |

Перечисленные типы моделей используются [во встроенных проектах](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/user/quick-start/about-system-projects). В этих проектах модели уже прошли обучение, поэтому осталось только подготовить целевую машину к инференсу и разработать RPA-проект. 



## Управление типами моделей
В случае, если необходимо работать с данными, для которых нет встроенного типа модели, добавьте тип модели самостоятельно. Управление типами осуществляется на странице **Настройки ➝ Типы моделей**.  

Администратор может добавить тип модели, изменить, удалить из системы.

![](<../../../.gitbook/assets1/primo-ai/model-types.png>)


### Добавить тип модели

1. Перейдите в раздел **Настройки ➝ Типы моделей**. 
1. Нажмите кнопку **Добавить тип модели**.
1. В открывшейся форме укажите параметры:
   * **Имя\*** — название будущего типа модели.
   * **Описание** — дополнительная информация о типе модели, добавляется по желанию. Описание отобразится в общем списке типов моделей под названием вашего типа.
   * **Цель\*** — ключевая задача, которую будет решать модель данного типа. Доступные значения:
     * *Распознавание* — модель нужна для распознавания данных в изображениях единого типа документов. Например, в изображениях паспортов.
     * *Классификация* — модель нужна, чтобы отнести изображение документа к одному из нескольких известных классов. Класс в данном случае — известный тип документа.
1. Нажмите **Сохранить**.

Выше описан упрощенный способ создания типа модели, который не затрагивает настройки в блоке **Конфигурация**. Этот блок содержится список технических параметров, который имеет стандартную настройку и будет использован при создании в проекте шаблона инференса с указанным типом модели. Конфигурацию в шаблоне инференса можно будет изменить.

Если вы изменить конфигурацию по умолчанию, то разверните блок настроек **Конфигурация**: (**СВЕРНУТЬ ГИТБУКОМ ЭТОТ БЛОК**)
   * **Допустимые расширения файлов** — допустимые расширения для изображений в запросе инференса. По умолчанию указаны все возможные расширения — `.bmp`, `.jpeg`, `.jpg`, `.pdf`, `.png`, `.tif`, `.tiff`. Обязательно оставьте хотя бы одно расширение, иначе инференс будет невозможен. 
   * **Определение ориентации страницы перед распознаванием**:
     * для модели классификации значение параметра не играет роли — параметр считается выключенным.
     * для модели распознавания:
       * *галочка установлена* — значение по умолчанию. В случае, если документ в запросе инференса будет иметь неправильную ориентацию, автоматическое определение ориентации поможет распознать данные корректно. Например, если документ на скане повернут боком. Включенный параметр увеличивает время инференса на несколько секунд для каждого изображения.
       * *галочка отсутствует* — автоматическое определение ориентации не используется. В этом случае инференс будет производиться быстрее.
   * **Удаление линий**:
     * для модели классификации значение параметра не играет роли — параметр считается выключенным.
     * для модели распознавания:
       * *галочка установлена* — значение по умолчанию. Из документов инференса будут автоматически удаляться линии для лучшего распознавания данных. Например, такие линии присутствуют на странице паспорта — их рекомендуется удалять. Включенный параметр увеличивает время инференса для каждого изображения.
       * *галочка отсутствует* — линии не удаляются. В этом случае инференс будет производиться быстрее.
   * **BboxMode** — формат задания координат для bbox. По умолчанию `0`.
   * **KeepAliveInterval** — частота отправки процессом телеметрии. По умолчанию `60`.
   * **Device** — 
   * **MinLineHeight** — 
   * **OptimalHeight** — 
   * **BlackLineThreshold** — 
   * **WhiteThreshold** — 
   * **WhiteBackground** — 
   * **Padding** — 
   * **Confidence** — 
   * **Plot** — 
   * **Multiprocessing** — 
   * **SmallTextFilter** — 
   * **MinWordHeight** — 
   * **OcrEngine** — 
   * **AllBboxesInResponse** —






### Изменить тип модели
:large_blue_diamond:***Примечание**. В типе модели нельзя изменить название и цель.*

1. Перейдите в раздел **Настройки ➝ Типы моделей**.
2. В таблице типов найдите нужную запись и нажмите значок ☰ для вызова меню действий.
3. Выберите **Редактировать**.
4. Измените свойства выбранного типа модели.
5. Нажмите **Сохранить**.


### Удалить тип модели

1. Перейдите в раздел **Настройки ➝ Типы моделей**.
2. В таблице типов найдите нужную запись и нажмите значок ☰ для вызова меню действий.
3. Выберите **Удалить**.
4. Подтвердите действие.

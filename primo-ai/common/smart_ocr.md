# Умный OCR

Умный OCR — программный компонент AI Server, предназначенный для обработки сканов документов. Компонент позволяет обучать сверточные нейросети (Convolutional Neural Networks, CNN) — модели глубокого обучения, специально разработанные для обработки изображений. Эти модели широко используются в задачах компьютерного зрения, помогают классифицировать изображения и распознавать в них данные.


## Типы моделей в Умном OCR
Модели делятся на типы в зависимости от задач, которые они должны решать:
* Модель классификации — классифицирует документы по заранее известным типам документов.
* Модель распознавания данных в документах утвержденной формы — распознает данные в заранее известном типе документа и возвращает их в структурированном формате (json).
* Модель распознавания данных в документах произвольной формы — распознает данные в документе свободной формы и возвращает их в структурированном формате (json).

## Работа с моделью


AI Server предоставляет возможность самостоятельно обучить модель любого типа, а также использовать предустановленные модели, которые не требуют обучения — они были обучены и оптимизированы командой Primo RPA

Набор предустановленных моделей постоянно расширяется и на текущий момент включает в себя:
* AnyText — модель для распознавания текста в сканах любого произвольного документа на белом фоне.
* Сlassifier — модель для классификации документов по типам: паспорт, СНИЛС, Торг-12.
* Passport — модель для распознавания текста в сканах паспортов.
* Snils — модель для распознавания текста в сканах СНИЛС.
* Torg12 — модель для распознавания текста в сканах Торг-12.

Перечисленные модели готовы для [использования](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/common/smart_ocr#ispolzovanie-modeli) в продуктивной среде без предварительного обучения.

Если вам не подошла ни одна из предустановленных моделей, то потребуется обучить модель самостоятельно. В этом случае процесс будет состоять из следующих этапов:
1. Обучение модели.
2. Тестирование модели.
3. Использование модели для решения реальных задач.

### Обучение модели
Обучение проводится на специально подготовленном наборе изображений документов (*датасете*). Все изображения датасета пользователю необходимо разметить — метки к данным укажут модели, объекты какого класса присутствуют на изображениях. Разметка играет ключевую роль в машинном обучении, поскольку помогает алгоритмам эффективно обучаться.

В процессе обучения модель адаптируется к особенностям конкретного датасета и минимизирует ошибку предсказания. Обученная нейросеть должна не только хорошо работать на обучающих данных, но и обобщать свои знания на новые, не используемые при обучении данные.

Для этого модель при обучении корректирует свои параметры (веса), ориентируясь на разницу между предсказанными результатами и истинными метками на изображениях (механизм обратного распространения ошибки). Чтобы достичь высоких показателей обучения, способности модели также проверяются на тестовом датасете, что позволяет отслеживать ее производительность и вносить корректировки в процесс обучения.

**Кто может обучать модель?**

Обучать модель любого типа могут сотрудники без специальных навыков. Для этого в AI Server существуют:
* инструменты для разметки изображений и формирования датасетов;
* инструменты для обучения и мониторинга процесса обучения.

### Тестирование модели
Пользователь может самостоятельно протестировать способности обученной модели до ее применения в продуктивной среде. Тестовые запросы позволяют оценить, насколько хорошо модель справляется с задачей, для которой была обучена. С помощью тестовых запросов проверяются различные сценарии использования модели, чтобы как можно раньше выявить потенциальные проблемы в виде низкой точности или ошибок классификации. Конечная цель тестирования — убедиться, что модель стабильно работает и не выдает неожиданных результатов.

**Как отправить тестовый запрос?**

В интерфейсе AI Server есть инструмент для отправки тестового запроса — пользователю потребуется выбрать тип модели и загрузить изображение. Результат отобразится на странице “Тестирование”, будет доступен для скачивания и копирования.

### Использование модели
Использование модели или инференс — это процесс применения обученной модели для расчета предсказаний на новых, ранее не видимых данных. Этот этап следует за обучением модели, когда она была натренирована на специальном наборе данных и теперь готова использовать свои знания для решения реальных задач.

**Как запустить инференс?**

AI Server содержит специальные инструменты для запуска инференса:
* Централизованное управление машинами с агентами для Умного OCR
* API для внешних систем
* Специальную библиотеку Primo.AI.Server для использования моделей в RPA-проектах

Для использования модели сначала потребуется запустить процесс инференса на целевой машине с компонентом Умный OCR. Этот шаг выполняется на стороне AI Server средствами интерфейса.

Далее следует шаг отправки запросов к серверу, который можно выполнить посредством API или роботами.

**Отправка запросов через API**

Спецификация для работы с системой через API описана по стандарту Open API. [Ссылка на спецификацию](https://disk.primo-rpa.ru/index.php/s/t9BHBjR6PP06Yax?path=%2FRelease%2FAI%20Server%2Fapi).

**Отправка запросов роботами**

Отправлять запросы могут и роботы Primo RPA. Для этого потребуется разработать RPA-проект с использованием библиотеки Primo.AI.Server. Проект разрабатывается в Primo RPA Studio.

Библиотека содержит элементы для отправки асинхронных запросов к AI Server. Подробную информацию об элементах вы можете узнать [здесь](https://docs.primo-rpa.ru/primo-rpa/g_elements/el_extra/ai_server).




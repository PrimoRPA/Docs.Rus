# Требования к разметке данных

Чтобы избежать проблем при инференсе, соблюдайте следующие рекомендации при разметке данных в изображениях, входящих в обучающий датасет. 

### Основные условия

1. **Правильно определите типы полей для разметки**:
    - текстовые поля (string);
    - поля с датами (date);
    - поля с численными данными (numeric).

2. **Определите максимальное количество строк в полях данных**:
   
    В накладных Торг-12:
    * поля "Поставщик", "Плательщик" обычно имеют 2 строки данных (string);
    * поля с номером документа и его датой — 1 строку.
    * в теле таблицы обычно до 5-ти строк информации в столбце "Товар" и 1 строка в численных столбцах.

4. **Определите язык распознавания**:
    - rus;
    - eng;
    - rus+eng.

    Чем уже выбор, тем надежнее сработает OCR. Не надо указывать 'rus+eng', если текст предполагается только на русском.

5. **Консистентность разметки**:
    - Разметка должна быть выполнена одинаковым образом для всех изображений.


### Дополнительные условия

1. **Аугментация\* данных**:
   - Применяйте аугментацию для увеличения разнообразия датасета — модифицируйте первоначальные изображения с помощью поворотов, изменения экспозиции, добавления шума для создания дополнительных изображений. 

     Аугментацию может выполнить автоматически — для этого при создании шаблона обучения модели используйте в параметре **Искуственно расширить датасет** значение `повороты + экспозиция + шум`. 

2. **Баланс полей**:
    - Обеспечьте равномерное распределение различных типов полей по всему датасету.
    - Избегайте преобладания полей одного типа.

    *Например, если в накладной встречаются документы с отсутствующим полем "Основание" — постарайтесь обеспечить несколько десятков таких образцов. При этом они не должны быть доминирующими в количественном отношении.*

### Проверка и валидация датасета

1. **Качество разметки**:
    - Проведите проверку качества разметки на выборке изображений. Проверьте еще раз соответствие значений выбранным полям. 
    - Исправьте любые ошибки и неточности в разметке. Ошибка может негативно повлиять на качество распознавания.

2. **Разделение на тренировочный и тестовый наборы**:
    - Разделите изображения на тренировочный (90%) и тестовый (10%) датасеты.
    - Убедитесь, что тестовый набор включает разнообразные типы форматов и полей.

### Заключение

Следуя данным требованиям и рекомендациям, вы сможете создать датасет, который обеспечит эффективное обучение модели для определения полей в отсканированных документах.

Если у вас возникли вопросы или требуется дополнительная информация, пожалуйста, свяжитесь с разработчиками системы Primo RPA AI Server.


> \**Аугментация данных — это методика создания дополнительных данных посредством модификации уже имеющихся данных. Аугментация помогает улучшить результат обучения модели, если первоначальный обучающий датасет содержит ограниченное количество изображений. Если у вас GPU — всегда используйте аугментацию данных.*

# Требования к изображениям для обучения 

Для успешной тренировки нейросети необходимо подготовить качественный датасет. В этом разделе изложены требования и рекомендации для подготовки такого датасета.


### 1. Общие требования

1. **Разрешение и качество изображений**:
    - Разрешение изображений должно быть достаточным для четкого распознавания полей — рекомендуется не менее 100 DPI.
    - Избегайте изображений с низким качеством, размытостью.

2. **Разнообразие документов**:
    - Включите документы с различными форматами и макетами, чтобы охватить все возможные варианты, которые будут поступать в систему на этапе инференса: темные, светлые, остканированные, сфотографированные, преобразованные из векторных форматов и пр.
Убедитесь, что датасет отражает реальные сценарии использования (тени, шумы, изгибы бумаги, если таковые встречаются).

3. **Размер датасета**:
    - Минимум — несколько десятков изображений документов определенного формата/вида. Большее количество позволит обучить модель с лучшими обобщающими способностями.  

    Например, если у вас есть счета от разных клиентов, которые незначительно отличаются (со штрихкодом и без, с логотипом поставщика и без логотипа и т.д.), то надо подготовить минимум несколько десятков изображений каждого вида.


### 2. Разметка данных

Чтобы избежать проблем при инференсе, соблюдайте следующие рекомендации при разметке данных в изображениях.

1. **Правильно определите типы полей для разметки**:
    - текстовые поля (string);
    - поля с датами (date);
    - поля с численными данными (numeric).

2. **Определите максимальное количество строк в полях данных**:
    В накладных Торг-12 поля:
    * Поставщик, Плательщик обычно имеют 2 строки данных (string);
    * номер документа и его дата — 1 строку.
    * в теле таблицы обычно до 5-ти строк информации в столбце "Товар" и одна строка в численных столбцах.

4. **Определите язык распознавания**:
    - rus;
    - eng;
    - rus+eng.
Чем уже выбор, тем надежнее сработает OCR. Не надо указывать 'rus+eng', если текст предполагается только на русском.

5. **Консистентность разметки**:
    - Разметка должна быть выполнена одинаковым образом для всех изображений.

**Качество разметки данных важнее размера датасета!**



### 3. Дополнительные условия

1. **Аугментация данных**:
    - Применяйте аугментации для увеличения разнообразия датасета: повороты, изменение яркости и контрастности, добавление шума. Размер датасета может быть искусственно увеличен в 5 раз.
Однако это пропорционально увеличит время обучения.
Если у вас GPU — всегда используйте аугментацию данных.


2. **Баланс классов**:
    - Обеспечьте равномерное распределение различных типов полей по всему датасету.
    - Избегайте перекоса в сторону какого-либо одного типа поля.
Например, в накладной встречаются документы с отсутствующим полем "Основание" — постарайтесь обеспечить несколько десятков таких образцов, однако они не должны быть доминирующими по количеству.

### 4. Проверка и валидация датасета

1. **Качество разметки**:
    - Проведите проверку качества разметки на выборке изображений.
    - Исправьте любые ошибки и неточности в разметке.

2. **Разделение на тренировочный и тестовый наборы**:
    - Разделите датасет на тренировочный (90%) и тестовый (10%) наборы.
    - Убедитесь, что тестовый набор включает разнообразные типы форматов и полей.


## Заключение

Подготовка качественного датасета — это ключевой шаг для успешного обучения нейросети. Следуя данным требованиям, вы сможете создать датасет, который обеспечит эффективное обучение модели для детектирования полей в отсканированных документах.

Если у вас возникли вопросы или требуется дополнительная информация, пожалуйста, свяжитесь с разработчиками проекта Primo.AI.

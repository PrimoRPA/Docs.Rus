# Управление процессом обучения

Чтобы перейти к процессам обучения, выберите в меню проекта раздел **Обучение > Шаблоны обучения**, после чего примените действие **Процессы** для имеющегося шаблона.

![](<../../../../.gitbook/assets1/primo-ai//user-guide/go-to-training-process.gif>)

## Возможные действия с процессом
* [Cоздать](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/user/training/operations-with-process#sozdat-process-obucheniya) — добавляет процесс обучения в текущий шаблон. 
* [Запустить](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/user/training/operations-with-process#zapustit-process-obucheniya) — запускает процесс обучения на доступной целевой машине. 
* [Мониторинг](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/user/training/operations-with-process#monitoring-obucheniya) — позволяет перейти к графику с ключевыми метриками обучения модели. График доступен, только если был запущен процесс обучения. Страница с мониторингом носит информативный характер.
* [Остановить](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/user/training/operations-with-process#ostanovit-process-obucheniya) — останавливает запущенный процесс обучения.
* [Выключить](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/user/training/operations-with-process#vyklyuchit-process-obucheniya) — блокирует возможность управлять процессом обучения, т. е. делает его недоступным для запуска / остановки.
* [Включить](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/user/training/operations-with-process#vklyuchit-process-obucheniya) — разблокирует процесс обучения, который ранее был выключен.
* [Удалить](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/user/training/operations-with-process#udalit-process-obucheniya) — удаляет из шаблона процесс обучения.


## Создать процесс обучения

:large_blue_diamond:***Примечание**. Роль пользователя должна иметь права «Шаблоны процесса обучения — Просмотр», «Процессы обучения — Просмотр, Создание».*

1. Нажмите кнопку **Добавить процессы обучения**.
1. В открывшейся форме выберите адрес целевой машины, на которой следует произвести обучение модели.
1. Нажмите **Сохранить**.

Процесс отобразится со статусом `Создан` в табличной части страницы.

![](<../../../../.gitbook/assets1/primo-ai/class-training-processadded.png>) 

## Запустить процесс обучения

:large_blue_diamond:***Примечание**. Роль пользователя должна иметь права «Шаблоны процесса обучения — Просмотр», «Процессы обучения — Просмотр, Управление».*

1. В табличной части найдите запись процесса и нажмите значок ☰ для вызова меню действий.
1. Выберите **Запустить** — статус процесса изменится на `Запускается`.

   ![](<../../../../.gitbook/assets1/primo-ai//user-guide/actions-with-training-process.png>)
   
1. Дождитесь, когда статус изменится на `Выполняется` — это признак успешного запуска процесса обучения. Обучение — длительный процесс, который зависит от размера датасета и, в среднем, занимает несколько часов. 

   ![](<../../../../.gitbook/assets1/primo-ai/class-training-process-is-running.png>) 

1. Чтобы узнать приблизительное время обучения вашей модели, разверните справочную информацию о процессе. В колонке **~До окончания** вы увидите примерное время, которое осталось до завершения процесса. 

   ![](<../../../../.gitbook/assets1/primo-ai/class-training-process-timeuntil.png>) 


## Остановить процесс обучения

:large_blue_diamond:***Примечание**. Роль пользователя должна иметь права «Шаблоны процесса обучения — Просмотр», «Процессы обучения — Просмотр, Управление».*

1. В табличной части найдите запись процесса и нажмите значок ☰ для вызова меню действий.
1. Выберите действие **Остановить**.


## Выключить процесс обучения

:large_blue_diamond:***Примечание**. Роль пользователя должна иметь права «Шаблоны процесса обучения — Просмотр», «Процессы обучения — Просмотр, Управление».*

1. В табличной части найдите запись процесса и нажмите значок ☰ для вызова меню действий.
1. Выберите действие **Выключить**.


## Включить процесс обучения

:large_blue_diamond:***Примечание**. Роль пользователя должна иметь права «Шаблоны процесса обучения — Просмотр», «Процессы обучения — Просмотр, Управление».*

1. В табличной части найдите запись процесса и нажмите значок ☰ для вызова меню действий.
1. Выберите действие **Включить**.


## Удалить процесс обучения

:large_blue_diamond:***Примечание**. Роль пользователя должна иметь права «Шаблоны процесса обучения — Просмотр», «Процессы обучения — Просмотр, Удаление».*

1. В табличной части найдите запись процесса и нажмите значок ☰ для вызова меню действий.
1. Выберите **Удалить** и подтвердите действие.

## Мониторинг обучения
:large_blue_diamond:***Примечание**. Роль пользователя должна иметь право «Шаблоны процесса обучения — Просмотр», «Процессы обучения — Просмотр, Управление».*

В Primo RPA AI Server cуществует возможность просмотреть график обучения модели. График иллюстрирует процесс обучения по [эпохам](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/glossary#epokha). 

Чтобы открыть график:
1. В табличной части найдите запись процесса и нажмите значок ☰ для вызова меню действий. 
1. Выберите **Мониторинг обучения**.
1. На странице мониторинга отображается график со следующими метриками:
   
   ![](<../../../../.gitbook/assets1/primo-ai/user-guide/training-schedule.png>)

**Метрики графика обучения:**
* Total Loss (Train_DS) — **синяя кривая** представляет собой общую ошибку на обучающем наборе данных. Она показывает, насколько хорошо модель обучается на этих данных. Видно, что потеря сначала быстро уменьшается, затем стабилизируется.
* Average Precision (Test_DS) — **красная кривая** показывает среднюю точность на тестовом наборе данных. Эта метрика демонстрирует, насколько точно модель предсказывает на новых, ранее не виденных данных. Видно, что средняя точность сначала увеличивается, а затем стабилизируется.
* Learning Rate (LR) — **зеленая кривая** отображает коэффициент обучения модели. Она демонстрирует, как изменяется коэффициент обучения по мере увеличения числа эпох. Обычно коэффициент обучения уменьшается с увеличением числа эпох, чтобы модель могла лучше подстраиваться под данные и минимизировать ошибку. В самом начале коэффициент рос.

Дополнительная информация есть в заголовке. Заголовок динамически меняется в процессе обучения и отображает текущие показатели:
* AP (Average Precision) — средняя точность. На рисунке она равна 0.903, что является интегральным показателем качества модели на тестовом наборе данных.
* t_loss — финальная ошибка равна 0.305 (некое относительное число).
* LR — коэффициент обучения. На рисунке он равен 0.0000000561.
* images — количество изображений. На рисунке количество равно 170.
* bsize — размер мини-батча равен 2.
* iter — общее количество итераций (15000).
* epoch — количество эпох, т.е. количество проходов через весь весь обучающий датасет, состоящий из 170 изображений. На рисунке 176 эпох.
* device — используется устройство CUDA, что означает, что обучение проводилось на графическом процессоре (GPU).

В целом, график демонстрирует, что модель стабильно обучалась, ошибки на обучающем наборе данных уменьшились и стабилизировались, а средняя точность на тестовом наборе данных показывает хорошие результаты.

Если модель не сходится, то есть не достигает желаемого уровня точности или имеет нестабильные метрики («скачущие» кривые), полезно обратить внимание на несколько ключевых аспектов графика:

1. **Ошибка на обучающем наборе данных (Total Loss,Train_DS):**
   * Снижение ошибки — если потери не уменьшаются или уменьшаются очень медленно, это может указывать на проблемы с обучением модели. Возможные причины могут включать слишком низкий коэффициент обучения или проблемы с данными (некачественная разметка).
   * Колебания — если ошибка слишком сильно скачет, это может быть признаком слишком высокого коэффициента обучения или наличия шума в данных (слишком разных изображений).
   * Обычно значение должно быть меньше 0.5.

2. **Средняя точность на тестовом наборе данных (Average Precision, Test_DS):**
   * Стабильность точности — если точность на тестовом наборе данных сильно колеблется или не увеличивается, это может указывать на проблемы с обобщающей способностью модели. Это может быть связано с переобучением (overfitting) или качеством данных.
   * Значение 0.75 можно считать хорошим, более 0.8 — отличным показателем.

3. **Коэффициент обучения (Learning Rate, LR):**
   * Параметры LR зафиксированы в скрипте. Применяется период разогрева (плавного увеличения до LR), затем плавное снижение.

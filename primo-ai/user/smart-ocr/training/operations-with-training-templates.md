# Управление шаблоном обучения

Пользователь может создать шаблон обучения, просмотреть, редактировать и удалить. Управление шаблоном осуществляется на странице **Обучение > Шаблоны обучения**.

![](<../../../../.gitbook/assets1/primo-ai//user-guide/training-model-page.png>)


## Создать шаблон процесса обучения

{% hint style="info" %}
**Примечание**. Роль пользователя должна иметь права «Шаблоны процесса обучения — Просмотр, Создание».
{% endhint %}

Нажмите кнопку **Добавить шаблон обучения** — откроется форма конфигурации шаблона:

![](<../../../../.gitbook/assets1/primo-ai/user-guide/training-temp-form-part1.png>)
   
Укажите параметры:
1. **Название\*** — произвольное название шаблона. Должно состоять только из букв и цифр, дефиса, подчеркивания и точки.
1. **Тип\*** — выберите тип модели из выпадающего списка. Тип модели указывает на цель ее применения — например, тип `passport` предназначен для модели, распознающей данные в паспорте. Если подходящего значения нет, обратитесь к пользователю с административными правами, чтобы он добавил нужный тип модели в систему.
1. **Шаблон модели\*** — предобученная базовая модель. По умолчанию используется универсальный тип `base-SmartOCR-01`.
1. **Скрипт** — параметр реализован для будущих версий.
1. **Описание** — краткое описание шаблона, которое позволит идентифицировать его среди других шаблонов проекта.
1. **Допустимые расширения файлов** — определяет, изображения каких форматов допустимо использовать в датасете для обучения. По умолчанию выбраны все возможные форматы.
1. **Искусственно расширить датасет** — определите, следует ли расширять датасет с помощью модификации входящих в него изображений. Например, за счет поворотов на 90/180/270 градусов, изменения экспозиции случайным образом и добавления шума. Возможные значения:
   * `повороты + экспозиция + шум` — значение по умолчанию, которое повышает качество обучения модели.
   * `экспозиция + шум` — применять только изменение экспозиции и добавление шума.
   * `нет` — не применять модификацию изображений. Установка этого значения повысит скорость обучения, но может снизить его качество.
1. **Кол-во процессов для загрузки датасета** — количество процессов для загрузки данных в модель, по умолчанию `8`. Значение не должно превышать количество физических ядер CPU в целевой машине. Рекомендации:
    * *Если целевая машина обладает высокопроизводительными характеристиками, вы можете увеличить это значение.*
    * *Не рекомендуется устанавливать значение ниже `4`, так как это замедлит обучение.*
1. **Кол-во картинок используемых в расчетах на одной итерации** — количество изображений, которые загружаются в модель в одной итерации ([batch size](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/glossary#batch-size)). По умолчанию `2`. Рекомендации:
    * *Увеличение количества изображений в итерации помогает ускорить обучение, но требует больше памяти. Если на целевой машине используется GPU, и вы столкнулись с ошибкой `out of memory`, то следует уменьшить значение в данном параметре.* 
1. **Кол-во итераций в расчетах** — количество итераций в процессе обучения, по умолчанию `1000`. Значение определяет, сколько раз требуется отправить изображение модели. Рекомендации:
   * *Более высокое значение (3-5 тыс.) повышает точность предсказаний, но требует более производительных характеристик целевой машины и удлиняет процесс обучения. Не рекомендуется устанавливать значение выше `5000`, чтобы избежать ситуации, когда модель [переобучилась](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/glossary#pereobuchenie).*
1. **Начальный коэф обучения (меняется по правилам определенным в scheduler)** — по умолчанию `0,005`. Начальный коэффициент ([learning rate](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/glossary#learning-rate-lr)) определяет размер шага, с которым модель обновляет веса в процессе обучения. Параметр влияет на то, насколько быстро или медленно модель сходится к оптимальным весам, а также на результат обучения. Примечания:
   * *Если выбрать слишком маленький начальный коэффициент (например, `0,0005`), то процесс обучения значительно затянется.* 
   * *Если выбрать слишком большой начальный коэффициент (например, `0,01`), то скорость обучения повысится, но модель может "перепрыгнуть" оптимальные значения весов и, в худшем случае, не сойдется к правильному решению.* 
1. **Время обновления файла (сек)** — по умолчанию `60`. Не рекомендуется изменять это значение. 
1. **Device** — определяет, какой компонент целевой машины требуется использовать для процесса обучения. Возможные значения:
   * `CUDA` — если на целевой машине нет CUDA, то автоматически будет использоваться CPU. Архитектура CUDA позволяет использовать графический процессор (GPU) от NVIDIA для повышения производительности параллельных вычислений. CUDA представляет собой набор инструментов и библиотек для работы с графическим процессором. 
   * `CPU` — центральный процессор, выполняющий основные операции и управляющий работой компьютера.

В завершение нажмите **Сохранить**.


## Просмотреть шаблоны обучения

{% hint style="info" %}
**Примечание**. Роль пользователя должна иметь право «Шаблоны процесса обучения — Просмотр».
{% endhint %}

Все имеющиеся шаблоны обучения отображаются в табличной части страницы **Обучение > Шаблоны обучения**.

![](<../../../../.gitbook/assets1/primo-ai/user-guide/view-training-templates.png>)

Таблица имеет следующие поля:
1. **Наименование** — название шаблона обучения, которое задал пользователь.
1. **Тип** — тип модели, который выбрал пользователь для процесса обучения.
1. **Шаблон модели** — предобученная модель.
1. **Версия скрипта** — не используется, реализовано для будущих версий.
1. **Дата создания** — дата и время создания шаблона модели.
1. **Действия** — доступные действия с шаблоном обучения: редактирование, удаление, переход к процессам обучения.

![](<../../../../.gitbook/assets1/primo-ai/user-guide/actions-with-training-templ.png>)


## Перейти к процессам обучения

{% hint style="info" %}
**Примечание**. Роль пользователя должна иметь право «Шаблоны процесса обучения — Просмотр».
{% endhint %}

Для запуска обучения модели недостаточно создать шаблон — требуется создать в этом шаблоне процесс обучения. Чтобы перейти к целевому действию, выберите для шаблона действие **Процессы** и следуйте [инструкции](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/user/smart-ocr/training/run-trainig-process#shag-2.-sozdanie-processa-obucheniya).


## Редактировать шаблон обучения

{% hint style="info" %}
**Примечание**. Роль пользователя должна иметь права «Шаблоны процесса обучения — Просмотр, Редактирование».
{% endhint %}

1. Перейдите на страницу **Обучение > Шаблоны обучения**.
1. В табличной части найдите нужную запись и нажмите значок ☰ для вызова меню действий.
1. Выберите действие **Редактировать**.
1. Измените свойства шаблона и выберите **Сохранить**.


## Удалить шаблон обучения

{% hint style="info" %}
**Примечание**. Роль пользователя должна иметь права «Шаблоны процесса обучения — Просмотр, Удаление».
{% endhint %}

1. Перейдите на страницу **Обучение > Шаблоны обучения**.
1. В табличной части найдите нужную запись и нажмите значок ☰ для вызова меню действий.
1. Выберите **Удалить** и подтвердите действие.


# Блокировка робота агентом
Оркестратор опрашивает роботов с некоторой периодичностью на предмет их состояния. Такая схема может приводить к накладкам при запуске одного и того же робота при его интенсивном использовании - робот не успевает ответить на запрос состояния или находится в процессе закрытия. 

Чтобы этого избежать, используется блокировка робота Агентом. Настройка находится в конфигурационном файле WebApi и по умолчанию включена:

![](<../../../.gitbook/assets/block-robot-by-agent-1.png>)

Суть настройки сводится к дополнительному запросу Оркестратора к Агенту на установку блокировки робота на основе файла. Файл блокировки после завершения работы робот удаляет за собой. Если файл при установке блокировки не был удален, или имеется активный процесс робота, блокировка будет отклонена.

Блокировка робота Агентом работает с определенной версии дистрибутива робота, в которой такая функция реализована. На более ранние версии это не распространяется. 

Файлы блокировки записываются в папку на машине робота. Папка настраивается в конфигурационном файле Агента:
  
![](<../../../.gitbook/assets/block-robot-by-agent-2.png>)

RDP-пользователям (локальным или доменным) необходимо выдать полные права на эту папку:

![](<../../../.gitbook/assets/block-robot-by-agent-3.png>)

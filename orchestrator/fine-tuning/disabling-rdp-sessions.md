# Настройка RDP-сессий

Параметры открытия/отключения/разлогинивания RDP-сессий находятся в секции **RDP** конфигурационного файла WebApi:

![](<../../.gitbook/assets/parameters-rdp-sessions-in-config.png>)

Описание параметров приведено в таблице ниже.

| Параметр                              | Назначение	                  | Примечание    |
| ------------------------------------- | ----------------------------- | ------------- |
| 1.	**SessionsReleaseThreadSleep**    |	Время засыпания потока отключения RDP-сессий	| В миллисекундах |
|	2. **EnabledLogOffDisconnectedRDPUsers** | Определяет, нужно ли разлогинивать отключенных RDP-пользователей	| true/false |
|	3. **LogOffDisconnectedRDPUsersThreadSleep**	| Время засыпания потока разлогинивания отключенных RDP-пользователей | В миллисекундах |
|	4. **LostConnectTimeout**	            | Время с последней даты обновления состояния, после которого соединение считается потерянным |	В секундах |
|	5. **LogOffDisconnectedRDPUsersAsync**	| Асинхронное разлогинивание RDP-пользователей | true/false |
|	6. **MaxAttemptStartLogOff**	          | Максимальное количество попыток отправки команды разлогона в Агент | Если попытки исчерпаны, Оркестратор не будет пытаться сделать разлогон. RDP-сессия останется отключенной
|	7. **MaxAttemptLogOff**               | Максимальное количество попыток разлогона. На основе ответа от Агента	| См. выше
|	8. **SessionsReleaseDelay**	          | Задержка релиза сессии. Сессия может быстро понадобиться другому роботу, чтобы её не пересоздавать заново | Время задержки - в мсек. Учитывается, только если ExclusiveSessionsRelease = false |
|	9. **ExclusiveSessionsRelease**	      | Если поднят этот флаг, робот при освобождении сессии не смотрит на отсутствие релиза сессии у других роботов. Иначе сессия не будет отключена, если хотя бы один робот не сообщил об этом, или его проект не требует закрытия сессии	| Настройка должна использоваться, только когда один робот закрывает сессию, чтобы не нарушать работу остальных роботов в этой сессии |
| 10.	**RDPSessionsReleaseService**    |	Системный параметр, в сл. версиях будет удален	| - |
| 11.	**LogOffDisconnectedRDPUsersService** |	Системный параметр, в сл. версиях будет удален | -|


Если количество RDP-лицензий ограничено*, нет запаса, а роботы в одной сессии не запускаются сразу друг за другом (например, по триггеру завершения), рекомендуется установить `SessionsReleaseDelay=0`.

Если при ограничении на RDP-лицензии роботы все же запускаются в одной сессии сразу друг за другом, рекомендуется установить `ExclusiveSessionsRelease=true`.

> \**Лицензии RDS для Windows*.


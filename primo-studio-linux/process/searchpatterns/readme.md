# Шаблоны поиска

**Шаблон поиска** — это свойство ряда элементов Студии, которое используется для взаимодействия с пользовательским интерфейсом программ. Шаблон позволяет идентифицировать компонент приложения и получить к нему программный доступ.

Свойство **Шаблон поиска** есть, например, у элемента [**Клик мышью**](https://docs.primo-rpa.ru/primo-rpa/g_elements/vstroennye-dlya-linux/els-uiinteraction/el-click) — с его помощью можно определить кнопку приложения, по которой нужно кликнуть.

## Общая информация

Шаблон представляет собой JSON-файл, который содержит заданный набор свойств для идентификации компонента. Его можно сформировать вручную или автоматически. Автоматическое формирование является предпочтительным сценарием, для этого используется кнопка **Выбрать компонент** ![](../../resources/process/searchpatterns/magic-stick.png) — она вызывает захват элемента управления в зависимости от категории приложения. Кнопку можно найти на панели элемента или в его свойствах, например:

![](../../resources/process/searchpatterns/клик-мышью.-волшебная-палочка.png)

Primo RPA поддерживает поиск в категориях:

* **Браузер**
* **Рабочий стол**

Редактировать шаблон можно двумя способами:

* **В формате правки JSON-файла.** Для открытия файла нажмите в свойстве **Шаблон поиска** значок редактирования. Пример: ![](../../resources/process/searchpatterns/шаблон-поиска.-многоточие-2.png).
* **Через окно редактора шаблона**. Для открытия графического окна нажмите кнопку ![](../../resources/process/searchpatterns/pattern-edit.png). Окно редактора видоизменяется в зависимости от категории приложения. Примеры интерфейса приведены в подразделе **Интерфейс редактора шаблона**.

## Интерфейс редактора шаблона

Интерфейс редактора шаблона для категорий **Браузер** и **Рабочий стол** имеет следующие общие элементы:


1. **Выбрать компонент** ![](../../resources/process/searchpatterns/magic-stick2.png) — позволяет автоматически выбрать элемент управления и добавить его в шаблон.
2. **Отобразить компонент** ![](../../resources/process/searchpatterns/15-1-1-1-1-1-1.png) — выделяет элемент управления, который был задан в шаблоне. Используется для проверки правильности шаблона поиска.
3. ![](../../resources/process/searchpatterns/pattern-element-add.png) — кнопка для ручного добавления элемента управления в шаблон.
4. ![](../../resources/process/searchpatterns/pattern-element-delete.png) — кнопка для удаления элемента из шаблона. Можно также использовать клавишу `Del`.

Кроме этого, окно редактора имеет две таблицы: первая - для добавления строк с компонентами, а вторая — для детализации каждой строки:

## Процесс поиска

Рассмотрим, как происходит поиск компонента на примере работы с приложением **Калькулятор** (**mate-calc**) (категория **Рабочий стол**).

С точки зрения Linux, приложение состоит из ряда компонентов (кнопки, текстовые поля, таблицы), объединенных в дерево. Любая кнопка, которую видит пользователь в интерфейсе программы, будет входить в данное дерево. В свою очередь, каждый компонент обладает набором свойств: они идентифицируют элемент приложения, предоставляют информацию о его специфике и назначении, разбивают все компоненты рабочего стола по ролям.

Для идентификации компонента Primo RPA также использует поиск по его свойствам.

Откроем приложение **Калькулятор**, для этого напишем в командной строке консоли **mate-calc** и нажмем клавишу **Еnter**. Создадим в Студии новый проект и выполним следующие действия:

1. Добавим контейнер [**Присоединиться к приложению**](https://docs.primo-rpa.ru/primo-rpa/g_elements/vstroennye-dlya-linux/els-desktop/el-desktop-attach). В свойстве **Заголовок** напишем заголовок окна **"Калькулятор"**.
2. Поместим в контейнер элемент [**Клик мышью**](https://docs.primo-rpa.ru/primo-rpa/g_elements/vstroennye-dlya-linux/els-uiinteraction/el-click).
3. На панели элемента **Клик мышью** нажмем кнопку **Выбрать компонент** ![](../../resources/process/searchpatterns/magic-stick.png) — для автоматического добавления компонента в шаблон.

![](../../resources/process/searchpatterns/шаблон-поиска.-калькулятор.png)

**Внимание! Окно с приложением Калькулятор должно быть активным!**

После нажатия кнопки ![](../../resources/process/searchpatterns/magic-stick.png) мы переместимся в окно с **Калькулятором**, чтобы выбрать нужный компонент. При наведении указателя на элемент приложения, он подсветится:

![](../../resources/process/searchpatterns/шаблон-поиска.-выбор-кнопки-в-калькуляторе.png)

Выберем **кнопку 5** — появится окно с выбором свойств для идентификации компонента:

> *В свойстве Index нумерация элементов начинается с 1.*

![](../../resources/process/searchpatterns/селекторы-калькулятора.png)

Необходимо выбрать такую комбинацию свойств, которая была бы уникальна и неизменна для данного компонента. Оставим только те свойства, которые являются надежными. Для нашего случая выберем параметры **Name**, **Role** и нажмем **ОК** — селектор создан. Он сохранится в JSON-файле шаблона поиска. Если просмотреть готовый шаблон через окно редактора, он будет выглядеть таким образом:

![](../../resources/process/searchpatterns/шаблон-поиска.-редактор.png)

В дальнейшем, при обработке шаблона, робот возьмет заданные свойства и проанализирует дерево компонентов в поисках позиции, которая имеет указанные значения в параметрах **Name** и **Role**. При совпадении значений компонент будет найден.

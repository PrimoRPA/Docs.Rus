# Обновления в версии Оркестратора 23.6

Примечания к выпуску Оркестратора 23.6 описывают изменения для версии приложения, выпущенной в июне 2023 года.

### Новые функции
1. В форму развертывания дистрибутива Робота, в том числе массового, добавлена настройка **Интервал**. Параметр определяет интервал передачи Роботом своего состояния в Оркестратор (запрос KeepAlive). значение указывается в миллисекундах. 
(упомянуть про конфиг в доке - связка)
Улучшение UI: Возможность настраивать AliveInterval для Робота. Я как пользователь системы Хочу видеть поле AliveInterval в форме массового развертывания роботов Чтобы более удобно иметь возможность конфигурировать развертывание. (задача https://dev.azure.com/primorpa/Primo/_workitems/edit/2517. Почему у этой задачи есть подзадача https://dev.azure.com/primorpa/Primo/_workitems/edit/2518, почему не в ней самой решение?)
Он определяет интервал отправки запросов KeepAlive (состояние Робота) к Оркестратору. Увеличение интервала отправки запроса может пригодиться для больших проектов, где нет необходимости слишком часто отправлять состояние Робота в Оркестратор.

# УТОЧНИТЬ - ФИЧИ:

1. В разделе **Настройки > Лицензии** добавлена возможность деактивировать просроченные/невалидные лицензии (по какой кнопке?). Также добавлена фильтрация лицензий по двум условиям: отозванные и/или деактивированные. (?) "Возможность деактивировать просроченные/невалидные лицензии, аналог логического удаления".  - это откуда?
1. Изменение блокировок БД при поиске подходящего робота, возможность менять алгоритмы (Legacy, LockFree, LockFreeWithCache) + UseLocalLock. - это откуда и что именно значит?
1. Добавлен запрет на удаление очереди обмена данными, если она используется в триггерах. - это откуда, видно ли в интерфейсе?

Нет подробной информации - блок задач "Критические оптимизации для Камаза и ГПН":
1. Оптимизация мягкого останова. https://dev.azure.com/primorpa/Primo/_workitems/edit/2498 и на стороне робота - https://dev.azure.com/primorpa/Primo/_workitems/edit/2503
1. Оптимизирован запуск триггеров.  https://dev.azure.com/primorpa/Primo/_workitems/edit/2499
1. Оптимизировано извлечение из очереди данных по FIFO. https://dev.azure.com/primorpa/Primo/_workitems/edit/2500 
1. Оптимизация: ограничение для потока событий триггеров. https://dev.azure.com/primorpa/Primo/_workitems/edit/2501
1. Оптимизация приема и обработки состояний роботов. Включая вычисление занятых/свободных лицензий. https://dev.azure.com/primorpa/Primo/_workitems/edit/2537

# УТОЧНИТЬ - ОШИБКИ:
1. Исправлена ошибка с подсчетом лицензий на главной - из подсчета исключены отозванные лицензии. - это откуда?
1. Исправлена ошибка с неразблокированием найденного робота при превышении максимального количества роботов на машине робота. - это откуда?
1. Бесконечный счетчик попыток отключенного разлогирования RDP-пользователя - что за счетчик, где. https://dev.azure.com/primorpa/Primo/_workitems/edit/2395

1. Исправлена ошибка сортировки элементов при отображении в очереди обмена данными. Теперь новые элементы попадают в конец очереди.



**Отсутствуют в редми, но есть в задачах спринта**: 

Ни ссылки на sd, ни развернутых комментов тестировщиков, ни скринов, ничего. 

1. **НЕЕДИНООБРАЗНОЕ ЗАВЕДЕНИЕ ЗАДАЧ!** родитель: https://dev.azure.com/primorpa/Primo/_workitems/edit/2367, дочерняя https://dev.azure.com/primorpa/Primo/_workitems/edit/2368 - почему задачи разбиты? Баг: Не отображаются статусы на странице робот у очереди (не надо ) - пишем/не пишем?
1. Улучшение UI: Перекомпоновать форму проекты (изменена последовательность настроек в форме добавления проекта в UI). https://dev.azure.com/primorpa/Primo/_workitems/edit/2199, с инфой https://dev.azure.com/primorpa/Primo/_workitems/edit/2200  - добавляем?
1. Улучшение UI: Добавить валидацию для формы задания. Я как пользователь системы хочу в форме заданий при заполнении триггера "Запуск при наличии новых элементов в очереди обмена данными" в поле "Cron-строка расписания опроса очереди или интервал опроса (в минутах)" иметь доп проверку в валидации. Чтобы пользователь вводил достаточно данных https://dev.azure.com/primorpa/Primo/_workitems/edit/2493
1. В разделе настроек **NuGet** (UI) в форму публикации NuGet-пакетов добавлена возможность копировать команды, использующиеся для публикации пакетов без Оркестратора.
((Добавить возможность копирования url в форме и таблице. (отличие задачи https://dev.azure.com/primorpa/Primo/_workitems/edit/2234 от задачи https://dev.azure.com/primorpa/Primo/_workitems/edit/2246). Я как пользователь системы хочу зайти в раздел Nuget и по клику на кнопку копировать в форме и таблице иметь возможность копировать url. Чтобы иметь более быстрый способ получать нужный url для его использования. (Почему это названо url, это же команда?))
1. Сгладить нагрузку от очереди проектов на пиках - это про что, где-то что-то добавилось для пользователя? Ему нужно что-то конфигурировать?
https://dev.azure.com/primorpa/Primo/_workitems/edit/2400 (а в это задаче нет подзадачи, например)
1. Исправлена ошибка отображения таблицы в разделе **Очереди обмена данными**: при изменении значения пагинации (со `100/стр.` на иное) таблица становилась пустой. https://dev.azure.com/primorpa/Primo/_workitems/edit/2273 - добавлять?
1. баг: Робот не запускается по триггеру на изменение папки на машине робота https://dev.azure.com/primorpa/Primo/_workitems/edit/2262 - почему не пишем?
1. был ли вообще баг? Робот перестает запускаться при добавлении новой версии к проекту и назначении её активной https://dev.azure.com/primorpa/Primo/_workitems/edit/2260
1. баг: Отрицательные значения полей "Запуск в ограниченном кол-ве экземпляров" и "Задержка освобождения RDP-сессии (мсек)" при редактировании проекта  (=была возможность указывать отриц значения? Только при редакт-ии или при добавлении проекта тоже?) https://dev.azure.com/primorpa/Primo/_workitems/edit/2292 - почему не пишем?
1. баг: Раббит не создает каналы в WebApi при старте https://dev.azure.com/primorpa/Primo/_workitems/edit/2064 - нужно?
1. баг: При попадании проекта в очередь на выполнение, запуск проекта не происходит https://dev.azure.com/primorpa/Primo/_workitems/edit/2538 - нужно?

# Обновления в версии Оркестратора 23.6

Примечания к выпуску Оркестратора 23.6 описывают изменения для версии приложения, выпущенной в июне 2023 года.

### Новые функции
1. Добавлена возможность деактивировать просроченные/невалидные лицензии. Функция доступна администратору Оркестратора в разделе **Настройки > Лицензии** при выборе соответствующей лицензии. Деактивация позволяет избавиться от избыточных записей в журнале, связанных с проверкой лицензий на просроченность/валидность. Деактивированную лицензию впоследствии можно вновь сделать активной. 
1. В форму развертывания дистрибутива Робота, в том числе массового, добавлена настройка **Интервал**. Параметр определяет интервал передачи Роботом своего состояния в Оркестратор (запрос KeepAlive). Увеличение интервала может пригодиться для больших проектов, где нет необходимости часто отправлять состояние Робота в Оркестратор. Значение указывается в миллисекундах. 
1. В форму редактирования пользователя добавлена настройка **Требовать смену пароля при следующем входе в систему**. Если параметр включен, то смена пароля станет обязательным условием. Управление настройкой доступно администратору (в т.ч. тенанта) в разделе **Настройки > Пользователи**.
1. Добавлена возможность множественного выделения элементов очереди для последующего клонирования или удаления.
1. Стало невозможным удаление очереди обмена данными, если она используется в триггерах. 
1. В форму публикации NuGet-пакетов (**Настройки > NuGet**) добавлена возможность копировать команды, предназначенные для публикации пакетов без Оркестратора. 
1. Улучшена логика ряда процессов для работы с БД. Оптимизированы:
   * запуск триггеров;
   * ограничение для потока событий триггеров;
   * извлечение элементов из очереди данных по FIFO;
   * прием и обработка состояний Роботов;
   * мягкая остановка Роботов;
   * занятие и освобождение лицензий;
   * освобождение RDP-сессий;
   * обработка событий старта и завершения проекта Роботом;
   * актуализация активных пользователей на главной странице;
   * добавлен подсчет процессов Роботов на Агенте для корректной работы ограничения по числу масимального количества работающих Роботов;
   * выполнена оптимизация соединений/каналов с RabbitMQ. 


### Исправленные ошибки
1. Исправлена ошибка, в результате которой при поиске подходящего Робота возникали блокировки в БД.
1. Исправлена ошибка, в результате которой Робот не мог запуститься при добавлении новой версии проекта и назначении её активной. 
1. Исправлена ошибка, в результате которой невозможно было разблокировать Робота, если на машине Робота превышено максимальное количество Роботов.
1. Исправлена ошибка, связанная с бесконечным подсчетом попыток разлогирования отключенного RDP-пользователя. Теперь подсчет работает корректно.
1. При удалении задания, по которому в очередь проектов уже был добавлен проект, возникала ошибка сервера. Теперь выводится корректный текст ошибки, либо задание сразу удаляется при наличии такой возможности.
1. При изменении пагинации (со `100/стр.` на иное значение) в разделе **Очереди обмена данными** таблица становилась пустой. Ошибка исправлена.
1. Исправлена ошибка с подсчетом лицензий на главной странице (**Обзор**): из подсчета исключены отозванные лицензии.
1. В очереди обмена данными не отображались статусы Роботов. Ошибка исправлена. 
1. Исправлена некорректная сортировка элементов в очереди обмена данными при отображении в UI. Теперь новые элементы попадают в конец очереди.
1. При изменении элемента очереди, находящегося не на 1-й странице, неправильно отображался список элементов: вместо текущей страницы выводился список с 1-й. При этом само действие производилось корректно - элемент клонировался/удалялся. Ошибка исправлена.

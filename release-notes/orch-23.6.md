# Обновления в версии Оркестратора 23.6

Примечания к выпуску Оркестратора 23.6 описывают изменения для версии приложения, выпущенной в июне 2023 года.

### Новые функции
1. Добавлена возможность деактивировать просроченные/невалидные лицензии. Функция доступна администратору Оркестратора в разделе **Настройки > Лицензии** при выборе соответствующей лицензии. Деактивация позволяет избавиться от избыточных записей в журнале, связанных с проверкой лицензий на просроченность/валидность. Деактивированную лицензию впоследствии можно вновь сделать активной. 
1. В форму развертывания дистрибутива Робота, в том числе массового, добавлена настройка **Интервал**. Параметр определяет интервал передачи Роботом своего состояния в Оркестратор (запрос KeepAlive). Увеличение интервала может пригодиться для больших проектов, где нет необходимости часто отправлять состояние Робота в Оркестратор. Значение указывается в миллисекундах. 
1. В форму редактирования пользователя добавлена настройка **Требовать смену пароля при следующем входе в систему**. Если параметр включен, то смена пароля станет обязательным условием. Управление настройкой доступно администратору (в т.ч. тенанта) в разделе **Настройки > Пользователи**.
1. Добавлена возможность множественного выделения элементов очереди для последующего клонирования или удаления.
1. Стало невозможным удаление очереди обмена данными, если она используется в триггерах. 
1. В форму публикации NuGet-пакетов (**Настройки > NuGet**) добавлена возможность копировать команды, предназначенные для публикации пакетов без Оркестратора. 
  

### Исправленные ошибки
1. Исправлена ошибка сортировки элементов при отображении в очереди обмена данными. Теперь новые элементы всегда попадают в конец очереди.
1. Баг: Не отображаются статусы на странице робот у очереди - родитель: https://dev.azure.com/primorpa/Primo/_workitems/edit/2367, дочерняя https://dev.azure.com/primorpa/Primo/_workitems/edit/2368 - В разделе **Роботы > Очереди обмена данными** в колонке **Кол-во роботов** -> Таблица Роботы очереди поправить вывод статусов в колонках Статус развертывания, Статус по аналогии как это сделано в таблице Роботов (там есть те же колонки и статусы). 
1. Исправлена ошибка отображения таблицы в разделе **Очереди обмена данными**: при изменении значения пагинации (со `100/стр.` на иное) таблица становилась пустой. https://dev.azure.com/primorpa/Primo/_workitems/edit/2273 - добавлять?


## УТОЧНИТЬ - ФИЧИ:
1. Изменение блокировок БД при поиске подходящего робота, возможность менять алгоритмы (Legacy, LockFree, LockFreeWithCache) + UseLocalLock. - это откуда и что именно значит?
1. Добавлен вывод типа ОС для робота с возможностью фильтрации по нему - на странице "Все роботы" не вижу ОС и фильтра. https://89.208.85.131:44392/administration/robots

Оптимизации:
1. Оптимизация мягкого останова. https://dev.azure.com/primorpa/Primo/_workitems/edit/2498 и на стороне робота - https://dev.azure.com/primorpa/Primo/_workitems/edit/2503
1. Оптимизирован запуск триггеров.  https://dev.azure.com/primorpa/Primo/_workitems/edit/2499
1. Оптимизировано извлечение из очереди данных по FIFO. https://dev.azure.com/primorpa/Primo/_workitems/edit/2500 
1. Оптимизация: ограничение для потока событий триггеров. https://dev.azure.com/primorpa/Primo/_workitems/edit/2501
1. Оптимизация приема и обработки состояний роботов. Включая вычисление занятых/свободных лицензий. https://dev.azure.com/primorpa/Primo/_workitems/edit/2537
1. Оптимизация занятия и освобождения лицензий - ?
1. Оптимизация освобождения RDP-сессий - ?
1. Оптимизация обработки события старта и завершения проекта роботом - ?
1. Оптимизация актуализации активных пользователей - ?
1. Оптимизация соединений/каналов с раббит - баг: Раббит не создает каналы в WebApi при старте https://dev.azure.com/primorpa/Primo/_workitems/edit/2064 - оно?
1. Оптимизация подсчета запущенных роботов. Добавлен подсчет количества процессов роботов на Агенте - (2497) в чем суть, раньше неправильно считалось? (почему в поле "Макс. кол-во работающих роботов" можно устанавливать отриц значения?)


## УТОЧНИТЬ - ОШИБКИ:
1. "Исправлена ошибка с подсчетом лицензий на главной. Из подсчета исключены отозванные лицензии" - имеется в виду страница **Обзор**? Спросить про подсчет энтерпрайз и десктоп лицензий из скринов.
1. "Исправлена ошибка с неразблокированием найденного робота при превышении максимального количества роботов на машине робота". - какой номер задачи? как происходит разблокировка робота, вручную по кнопке "разблокировать"? а блокировка? Исправлена ошибка, в результате которой невозможно было разблокировать робота, если на машине Робота было превышено максимальное количество роботов.
"Исправление бага со слетающими блокировками" - это о чем, какая задача?
1. Бесконечный счетчик попыток отключенного разлогирования RDP-пользователя - что за счетчик, где. https://dev.azure.com/primorpa/Primo/_workitems/edit/2395
1. баг: При попадании проекта в очередь на выполнение, запуск проекта не происходит https://dev.azure.com/primorpa/Primo/_workitems/edit/2538 - нужно? "Предположительно дело в автоматической очистке таблицы RpaProjectsQueue. Проекты, находящиеся в очереди на момент очистки таблицы, остаются в очереди и не извлекаются из нее." - дело в этом? как поправили?
1. Исправлен баг с удалением используемого в очереди проектов задания
1. баг: Робот перестает запускаться при добавлении новой версии к проекту и назначении её активной https://dev.azure.com/primorpa/Primo/_workitems/edit/2260 (у Пономарева если что спросить)



## для себя (не в релизе):

1. Все роботы - колонка статус - (это статус выполнения проекта Роботом, верно?) какие статусы есть? "Недоступен" - это говорит о чем? "Ожидает"? "Стартует" - включает в себя все стадии запуска робота из приложения 2, сами стадии отображаются только в логах? 

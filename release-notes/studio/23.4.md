# Primo Studio 23.4

Примечания к выпуску Студии 23.4 описывают изменения для версии приложения, выпущенной в апреле 2023 года.

## Новые функции
1. [В разделе задач Robot Runner'а](https://docs.primo-rpa.ru/primo-rpa/primo-robot/robot-runner/tasks) внесены изменения в интерфейс: 
   * добавлен признак, указывающий на выполнение задачи роботом. Теперь в общем списке задач можно легко отследить, какие задачи выполняются в данный момент; 
   * кнопка быстрого запуска задачи была уменьшена и перемещена в правую часть экрана.
1. В элементе [**Switch**](https://docs.primo-rpa.ru/primo-rpa/g_elements/el_basic/els_logic/el_logic_switch) добавлено окно подтверждения при удалении случая. Это сделано для предотвращения потери данных при случайном нажатии.
1. [В панели **Вывод**](https://github.com/PrimoRPA/Docs.Rus/blob/171-%D0%BD%D0%B0%D0%BF%D0%B8%D1%81%D0%B0%D1%82%D1%8C-%D1%80%D0%B5%D0%BB%D0%B8%D0%B7-%D1%81%D1%82%D1%83%D0%B4%D0%B8%D0%B8-234/primo-studio/process/debug/README.md#%D0%BF%D0%B0%D0%BD%D0%B5%D0%BB%D1%8C-%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4) появилась функция, позволяющая получить полное значение переменной для его просмотра. Функция может понадобиться в случае, если значение переменной вывода слишком большое и отображается в усеченном виде. Полная загрузка значения теперь доступна в окне просмотра по кнопке **Получить целиком**. 
1. [В разделе импорта проектов](https://docs.primo-rpa.ru/primo-rpa/primo-studio/tools/import#zapusk-importa) появилась настройка **Импортировать переменную ForEach виртуально**. Включение параметра помогает избежать ситуации, когда при импорте проекта виртуальная переменная в цикле For Each замещается локальной.
1. В элементе [**Получить текст (SAP)**](https://docs.primo-rpa.ru/primo-rpa/g_elements/el_basic/els_sap/el_sap_gettext) появилось свойство **Обрезка**, которое удаляет ненужные пробелы в начале и/или в конце текста, добавляемые к нему при чтении. Выбрать, какие пробелы нужно удалить, можно в значениях свойства.
1. При отладке стало возможным копировать текущие значения переменных в буфер обмена. Копирование доступно из панелей [**Переменные** и **Наблюдение**](https://docs.primo-rpa.ru/primo-rpa/primo-studio/process/debug#znacheniya-peremennykh) по команде контекстного меню либо комбинацией клавиш `Ctrl` + `C`. Значения переменных попадают в буфер обмена в виде текста. Структурированные данные сериализуются в JSON-формат и также становятся доступны в текстовом виде.
1. В элементах [**Объект к XML**](https://docs.primo-rpa.ru/primo-rpa/g_elements/el_basic/els_data/els_data_xml/el_data_xml_toxml) и [**Объект к JSON**](https://docs.primo-rpa.ru/primo-rpa/g_elements/el_basic/els_data/els_data_json/el_data_json_tojson) добавлена функция форматирования строки с результатом. Отформатированные данные отображаются с отступами, что облегчает их восприятие. Функция опциональна.
1. В окне [**Поиск** (Ctrl+F)](https://docs.primo-rpa.ru/primo-rpa/primo-studio/projects/search) стало возможным включать отображение столбцов **ID элемента** и **Номер** в таблице результатов. Отображение колонок настраивается в контекстном меню таблицы по команде **Показать выбор колонок**. По умолчанию эти столбцы не отображаются. 
1. Добавлена возможность [переименовывать аргумент](https://github.com/PrimoRPA/Docs.Rus/edit/171-%D0%BD%D0%B0%D0%BF%D0%B8%D1%81%D0%B0%D1%82%D1%8C-%D1%80%D0%B5%D0%BB%D0%B8%D0%B7-%D1%81%D1%82%D1%83%D0%B4%D0%B8%D0%B8-234/primo-studio/process/variables.md#%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B0%D1%80%D0%B3%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0) в рамках всего процесса, в котором он используется. Для этого на панели **Аргументы** добавлена соответствующая кнопка.
1. Добавлена возможность работы с удаленным рабочим столом Citrix через протокол ICA.
1. Issue 1465: BrowserExt - щелкать выбранный тег по аттрибутам, когда он содержит текст внутри себя (сейчас кликается текст).

## Исправленные ошибки
1. В шаблонах поиска исправлена некорректная обработка многострочного текста. Если в каком-то из шаблонов имелся многострочный текст с переносами, то он обрабатывался неправильно, вследствие чего приходилось заменять переносы (каждый перенос?) на символ `*`. Теперь переносы работают корректно, и знак `*` при поиске текста отрабатывает корректно вне зависимости от количества строк. (???)
1. Исправлена ошибка при работе с Git, которая возникала при попытке сделать pull из удаленного репозитория.
1. При указании в **Цикле ForEach** переменной с типом данных JToken/JObject проверка синтаксиса выводила предупреждение о том, что такого класса нет. Теперь при назначении типа данных отображается его полное имя, и ошибки не возникает.
1. В некоторых ситуациях при повторном редактировании шаблона поиска не сохранялись внесенные изменения. Ошибка исправлена.
1. Исправлена ошибка фильтрации элементов по слову *image* в интерфейсе на английском языке. Ранее фильтрация по искомому слову не производилась, отображался полный список элементов. С этой версии фильтрация осуществляется корректно, в том числе на уровне вывода всех дочерних элементов узла, содержащего искомую подстроку.
1. Элемент **Чтение теста (PDF)** не работал в процессе с типом **Только код**: текстовые данные файла не считывались. Ошибка исправлена.
1. В окне **Поиск** (Ctrl+F) не работал переход к найденному элементу в диаграммах. Ошибка исправлена.
1. При импорте проекта могли не отображаться локальные переменные, сейчас все работает корректно. (**Как они не отображались, если даже для цикла сделали отд настройку? таска 1290)**
1. При выполнении элемента **Перетаскивание** (Работа с UI) возникала ошибка таймаута: неправильно обрабатывались координаты. Исправлено.
1. При использовании в процессе нескольких элементов **Клик изображения мышью** подряд возникала ошибка таймаута. Причина заключалась в потере значения у переменной System.Drawing.Bitmap. С этой версии элементы выполняются корректно.
1. Исправлена ошибка поиска элементов управления в браузерах, которая возникала при указании в шаблоне поиска текста в сочетании с другими тегами. 
1. Исправлено ошибочное закрытие Студии, которое возникало при отмене выбора проекта в начале работы с приложением. 
1. Bug 1448: При попытке создания библиотеки без открытого проекта, появляется ошибка
1. Bug 1449: После закрытия проекта, в окне Студии пропадает «меню быстрых действий»
1. Bug 1482: Не разворачивается окно студии при остановке отладки процесса на брейкпоинте
1. Bug 1483: После установки Primo.Robot.x64.1.23.2.1 в русской инсталляции, у Runnera неправильное название ярлыка.
1. Bug 1486: Активность "Комбо-бокс (SAP)" - исключение
1. Bug 1515: Точка останова не разворачивает студию в момент приостановки отладки
1. Bug 1520: Зависание робота при возникновении исключения в WorkflowController.Execute()
1. Bug 1597: Не загружается и не запускается проект в Раннере из Оркестратора если тенант не стандартный
1. Bug 1604: Possible NullRefrenceException in LTools.Desctop.UIAutoDUI
1. Bug 1769: Не работает активность пересчет формул с драйвером Interop
1. Bug 1081: Ошибка подключения репозитория - уточнить у Ивана суть.
1. 805 - почитать подробнее комменты. Зацикленность использования классов роботами. Если некая функция очень долго висит и ничего не делает, то робот запускал ее повторно. в отладке. исправили.

# Оркестратор 23.9

Примечания к выпуску Оркестратора 23.9 описывают изменения для версии приложения, выпущенной в сентябре 2023 года.

### Новые функции и улучшения
1. Осуществлена миграция Оркестратора с Core 3.1 на платформу .NET 7. Главным преимуществом .NET 7 является повышенная производительность.
1. Для IIS добавлена настройка видеотрансляции RDP-сессии робота. Ранее такая возможность существовала только для Nginx.
1. В ресурсах Оркестратора добавился новый тип данных - JObject. Он позволяет записывать JSON-данные. 
1. Количество допустимых символов в названии расписания увеличено с 20-ти до 250-ти. 
1. Улучшена проверка уникальности натурального ключа для элементов очереди. Теперь для проверки возможно указать, нужно ли учитывать ключи удаленных элементов. Функциональность возможно применять как для глобальной, так и для локальной проверки (внутри определенной очереди).

### Исправленные ошибки
1. Исправлена ошибка, из-за которой не получалось запустить сразу несколько роботов по триггеру «Запуск из другого робота». 
1. Оптимизирована работа журнала робота. В целях улучшения было добавлено:
   * кратковременное кэширование для запроса операций робота;
   * долговременное кэширование для событий завершенной операции робота.
1. Исправлена ошибка, связанная с настройками роли для AD-пользователей. При попытке изменить группы AD в настройках роли, новое значение не сохранялось. 
1. При попытке вручную запустить робот с проектом возникала ошибка доступа, хотя у пользователя имелись соответствующие права. Ошибка исправлена. Теперь, если в настройках роли включены права на управление роботами и проектами, запуск робота с проектом выполнится корректно.
1. При нажатии в UI Оркестратора кнопки «Попросить остановиться» робот не останавливался. Проблема воспроизводилась при использовании конфигурации MSSQL + IIS. Ошибка исправлена.
1. Исправлен некорректный порядок сортировки в таблице «RPA-проекты» (UI Оркестратора). Не работала сортировка по двум и более столбцам.


### Где скачать
1. [Скачать комплект поставки Оркестратора 23.9:](https://disk.primo-rpa.ru/index.php/s/primo?path=%2FRelease%2FOrchestrator)
    * **Primo RPA Orchestrator 23.9.0 FULL.zip** - полный комплект поставки, в который входят дистрибутивы Оркестратора и внешних компонентов: например, базы данных PostgreSQL Server, брокера сообщений RabbitMQ и др. Вес дистрибутива ~ 3,5 Гб.
    * **Primo RPA Orchestrator 23.9.0.zip** - облегченный вариант поставки, весит ~ 1,1 Гб.

2. [Скачать дистрибутив Robot Enterprise 23.9](https://disk.primo-rpa.ru/index.php/s/primo?path=%2FRelease%2FRobot). Архив называется **Primo RPA Robot Orchestrator <архитектура> 23.9.0.zip**. Дистрибутив этого робота загружается непосредственно в Оркестратор.


---------------
1. В UI Оркестратора добавлено уведомление об истечении срока действия лицензии. Оповещение появляется за 2 недели до окончания срока и отображается на всех страницах Оркестратора.  
Вопросы: 
1) все верно? 2) Оповещение модальное или нет? 3) Оно появляется по каждой лицензии? 4) Если пользователь 1 раз закрыл его, оно больше ему не покажется? 5) Отправка в почту сообщения всем, кто подписан на соответствующее событие "Срок действия лицензии истекает" - его раньше не было в списке в UI?.
https://azure-dos.s1.primo1.orch/PrimoCollection/Orchestrator/_workitems/edit/149
2. Для элементов очереди обмена данными улучшена проверка натурального на уникальность. Теперь для проверки возможно указать, нужно ли учитывать ключи удаленных элементов. Настройку возможно применять как для глобальной, так и для локальной проверки (внутри определенной очереди).
Вопросы: где настраивается, в каком параметре?
https://azure-dos.s1.primo1.orch/PrimoCollection/Orchestrator/_workitems/edit/767
3. Оптимизирована работа журнала робота. В целях улучшения было добавлено:
   * кратковременное кэширование для запроса операций робота; 
   * долговременное кэширование для событий завершенной операции робота.
Вопросы: что дает кратковременное кеширование? что дает долговременное? с точки зрения плюсов для пользователя.
4. В ресурсах Оркестратора добавился новый тип данных - JObject. Он позволяет записывать JSON-данные. - здесь все верно?
5. Из демо: "Исправлен баг с пропуском запуска, если в истории запуска последняя запись без признака завершения" - это о чем именно? какая задача?
1. Из демо 15:50: "пофиксили дублирование лога в запросе" - это о чем именно? задачу в ажуре не нашла. 
1. перенесли статистику. в очередях ломались графики. если в очереди 0 элементов, не было перехода в элементы очереди. добавили дефолтный график, чтобы можно было переходить.


-------------
1. (3304) - Добавлены методы, которые извлекают из данных элемента очереди свойства PostponeAt, DeadlineAt, Retray и отдают их значения на выходе.
//Добавить в орк-клиент методы для работы и тестирования для выборки очередей с хедерами PostponeAt, DeadlineAt, Retray (Orchestrator)
1. (3443) Исправлен баг с некорректным порядком сортировки по многим столбцам на странице "RPA-проекты".
1. (3723) Исправлен баг с "Не сохраняются изменения группы AD в настроках роли"
1. (3685) Исправлен баг с софткилл для MSSQL (set idenity_insert on)
1. 1017 - Не запускаются проекты на роботе при выданных привилегиях. ОР: Должно хватать прав с активированным чек-боксом: "Управление".  С приведённым заказчиком набором прав при попытке запустить проект - получаем ошибку и запуск проекта не происходит ((запуск робота с проектом). (1. (1017) Исправлен баг с запуском робота без разрешения на создание, разделены разрешения развертывания и старта)
1. (3624) Добавлена возможность настроить трансляцию RDP-сессии робота на IIS. вроде как вошло в документацию. в релиз надо.
Настройка upstream rdpstream для IIS
4. (3372) Баг - При одновременном старте роботов, запускаемых из другого проекта, сессии роботов отваливаются. Использовать ограничение для потока событий (от) триггеров запуска из роботов.
10. (3862) Кратковременное кэширование запроса операций робота
11. (3865) Долговременное кэширование событий завершенной операции робота.
1. (3887) Опциональное использование Redis в качестве долгосрочного кэша для событий операции робота
12. (767) - Проверка уникальности в очереди. Уточнить, где настраивается параметр про ключи удаленных элементов.
1. (3685) Исправлен баг с софткилл для MSSQL. Ранее только для постгрес.

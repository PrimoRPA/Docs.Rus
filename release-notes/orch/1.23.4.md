# Обновления в версии Оркестратора 1.23.4

Примечания к выпуску Оркестратора 1.23.4 описывают изменения для версии приложения, выпущенной в апреле 2023 года.

### Новые функции
1. Добавлены события в журнал Оркестратора:
  * **Проект запущен по заданию и еще не завершен (RobotService)**;
  * **Проект запущен в максимальном количестве экземпляров (RobotService)**;
  * **Проект запущен по заданию и еще не завершен (RobotStart)**;
  * **Проект запущен в максимальном количестве экземпляров (RobotStart)**;
  * **Проект запущен в максимальном количестве экземпляров (Queue)**.
1. В журнале Оркестратора добавлена детализация событий в столбец **EntityData**. Теперь в нем отображается информация, связанная с владельцем события (например, наименование), ID и прочие метаданные. 
1. Добавлена возможность настраивать стратегию очереди проектов отдельно для каждого тенанта. Настройки осуществляются в конфигурационном файле WebApi в секции `Tenants` в параметре `RpaProjectQueueProcessingType`. Стратегия на уровне всех тенантов (глобальная), как и ранее, устанавливается в разделе UI Оркестратора **Настройки > Стратегия очереди проектов**. Если для тенанта не задана стратегия в конфигурационном файле, то будет использоваться глобальная. 
1. OperationKey добавлен в журнал Оркестратора
1. Добавлена возможность управлять таблицами журналов робота и Оркестратора в разделе **Настройки > Журналы**: 
* удалять выбранную секцию журнала по кнопке **Удалить**;
* создавать дамп выбранной секции по кнопке **Сделать дамп**.
1. При переразвертывании робота стало возможным изменить версию ядра в одноименном параметре. Переразвертывание осуществляется в разделе UI Оркестратора **Роботы > Все роботы > Переразвернуть роботов**. Новая версия ядра робота, v2, обладает улучшенной производительностью. Чтобы понять, с каким ядром работает тот или иной робот, достаточно посмотреть на столбец с его наименованием: версия 2 будет отмечена после имени робота как v2, версия 1 отображаться не будет.
1. Для заданий с запуском по расписанию добавлена функция завершения работы робота. Настройка доступна в разделе создания задания по расписанию в виде параметра **Завершение робота**. При его включении робот, выполняющий проект в рамках задания, будет завершать свою работу согласно настройкам расписания. 
1. В разделе меню **RPA-проекты > Все RPA-проекты** стало доступным множественное удаление роботов, привязанных к проекту. Для этого требуется выделить проект и нажать кнопку **Все роботы проекта**, после чего отметить все или несколько роботов, которые требуется удалить из привязанных.

1. Подсчитываются для отображения предупреждения о стратегии только не удаленные роботы и проекты.
1. UseAgentLock = true по умолчанию.
1. В таблице с RPA-проектами серверная сортировка.
1. Запрет ручного запуска (без задания) проекта с аргументами.
1. Добавлен SSL-сертификат для RabbitMQ.
1. Рассылка по событиям типа "Все" (список всех настраивается в конфиге)
1. Оптимизирована работа мониторинга: сокращено время отклика формы. На большом объеме записей, например, свыше 20 млн, могли возникать задержки отклика - сейчас все работает корректно.
1. Оптимизация отображения журнала оркестратора.
1. Оптимизация утечки коннекшнов у RabbitMQ.

Для очистки журналов (посекционно) и создания дампов секций журналов 

### Исправленные ошибки
1. Исправлена ошибка, возникавшая при добавлении версии проекта: в параметрах проекта устанавливалось значение по умолчанию. Под параметрами подразумеваются такие настройки проекта в Оркестраторе, как **Закрыть RDP-сессию**, **Не повторять в очереди проектов** и т.п. Теперь значение параметров будет соответствовать активной версии проекта. 


1. В работе робота с очередью обмена данных. Исправлена ошибка с фильтрацией по элементам в статусе **New**. Теперь эта фильтрация недоступна.

1. Исправлен баг с ограничением на запуск при параллельном запуске N роботов из одного задания.
1. Исправлен баг с "Последовательности вызова при запуске проекта" - висела блокировка LockAt.
1. Исправлен баг с отображением LimitedLaunch в таблице RPA-проектов.
1. Исправлен баг в запросе для плоского представления журнала робота для MSSQL.

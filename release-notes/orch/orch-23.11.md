# Оркестратор 23.11

Примечания к выпуску Оркестратора 23.11 описывают изменения для версии приложения, выпущенной в ноябре 2023 года.

### Новые функции и улучшения

1. Улучшено управление RPA-проектами. Теперь для ручной постановки проекта в очередь проектов не требуется создавать задание с ручным запуском - достаточно нажать кнопку **Поместить в очередь проектов** в разделе **RPA-проекты**. Кнопка становится активной после выбора проекта (-ов). 
1. Улучшена работа с таблицей раздела **Мониторинг**. В случае, когда выбран интервал **За 30 дней** и не задан фильтр по состоянию выполнения проекта, система автоматически ограничит период выборки данных до 15-ти дней. Об этом пользователей будет информировать соответствующая подсказка, добавленная в блок фильтров. 
1. Улучшена навигация в разделе **Мониторинг**. Теперь при попытке перехода на другие страницы таблицы **Мониторинг** система автоматически возвращает пользователя на первую страницу. 
//??? эт зачем сделано, не совсем поняла.  https://azure-dos.s1.primo1.orch/PrimoCollection/Orchestrator/_workitems/edit/7590
1. В разделе **Журнал** улучшена фильтрация событий Оркестратора по полю **Пользователь**. Добавлена возможность заполнять его значение при помощи клика по логину пользователя в таблице.
1. Добавлена новая категория прав доступа, определяющая набор разрешенных операций в разделе **Настройки > Ч-Б список Студий**. Для встроенных ролей Администратор (Administrator) и Администратор тенанта (TenantAdministrator) по умолчанию разрешены все операции с Ч-Б списком, а именно: просмотр/создание/редактирование/удаление сущностей.
   * Права выдаются администратору тенанта только в рамках его тенанта.
   * Администратор (Administrator) может просматривать/редактировать и тд сущности во всех тенантах.

   ![](<../../.gitbook/assets1/black-white-permissions.png>)

1. Улучшен UX/UI раздела **Роботы > Все роботы**. При невозможности разблокировать робота система отобразит сообщение о возможных причинах. 
1. Улучшено изменение приоритетов для роботов, добавленных к RPA-проекту. Реализован способ drag-and-drop - теперь изменить приоритет робота можно путем перетаскивания соответствующей строки в таблице.
_______________________________________

1. Добавлены RDP-пользователи для Linux-роботов. (послушать демо, если не понятно - к Максу)
Для UI:
Флаг Linux для пользователя RDP. В форме добавления/редактирования робота разблокировать поле RDP user для Linux-роботов.

https://azure-dos.s1.primo1.orch/PrimoCollection/Orchestrator/_boards/board/t/Orchestrator%20Team/Stories/?workitem=4052

1. Добавлены функции:
   * отключить/скрыть дефолтный тенант; В конфигурационный файл WebApi добавляется параметр Tenants. DisabledDefaultTenant, который включает/выключает дефолтный тенант. При выключении дефолтного тенанта:
1. Авторизация в нем будет не возможна
2. В выпадающих списках выбора тенантов в Оркестраторе и Студии/Раннере дефолтный тенант будет отсутствовать

   * отключить встроенные не технические учетные записи: admin, superadmin, studio
https://azure-dos.s1.primo1.orch/PrimoCollection/Orchestrator/_boards/board/t/Orchestrator%20Team/Stories/?workitem=9181

_______________________________________

1. 



### Исправленные ошибки

1. Устранена ошибка отображения версий роботов. Для робота с ядром v1 стала отображаться версия (ранее отсутствовала), для робота с ядром v2 исправлено отображение версии в форме добавления к проекту.
1. Исправлена ошибка в форме редактирования пользователя. Ранее для поля Email отсутствовала красная звездочка, хотя это поле всегда должно оставаться заполненным.
1. Исправлено UX/UI замечание, связанное с отображением списка процессов при добавлении проекта в Оркестратор. 
1. Исправлена ошибка в работе заданий с cron-строкой. Ранее, если пользователь менял cron-строку триггера, то обновленное расписание не применялось. 
1. Исправлена ошибка с повторным запуском заданий по расписанию. Повторный запуск производился мгновенно, без учета времени в расписании. 
1. Исправлена ошибка неуникальности триггера при редактировании задания. 
1. Исправлено некорректное поведение роботов при нехватке лицензий. Робот, который не успевал занять лицензию, завершал работу с ошибкой, а проект не попадал в очередь ожидания. 
1. Исправлено некорректное отображение названия проекта на кириллице, которое приводило к ошибке запуска такого проекта. 
1. Устранена потеря тегов при повторении элемента в очереди обмена данных.
1. Исправлена запись многочисленных ошибок в журнал Оркестратора. Проблема воспроизводилась для конфигурации Windows Server 2016 + IIS + MSSQL. 
1. Исправлена логика для очистки ссылок на триггеры в таблице запусков RPA-проекта.


Из РЕДМИ:

- (7570) Для постгреса возможность задать схему, отличную от public, чтобы не создавать вручную в ней таблицу миграций
- (7592) Изменение статуса возможно только у прочитанного элемента
- (3566) Добавлена возможность использования Email MS Exchange Server
- (7642) Добавлены недостающие индексы в RpaProjectLaunches и Robots
- (7754) Разделить RpaProjectLaunches на оперативную (в основной БД) архивную (в БД с логами) части
- (7974) Использовать ограничение для потока событий триггеров + Мониторинг очереди потока событий триггеров
- (8560) Автоматическое временное замедление очереди проектов при пиках нагрузки на машинах роботов


Вопросы Князькову:

1. Корректна ли формулировка "Исправлена логика для очистки ссылок на триггеры в таблице запусков RPA-проекта" для задачи https://azure-dos.s1.primo1.orch/PrimoCollection/Orchestrator/_boards/board/t/Orchestrator%20Team/Stories/?workitem=7801
В редми так: Исправлена ошибка с конфликтом инструкции DELETE с ограничением REFERENCE FK_RpaProjectLaunches_Triggers_TriggerId
Нужно ли это вообще в релизе?

1. Приоритеты роботов:
   * ...
   * ...
  

1. Корректна ли для задачи "Ошибки в логе оркестратора" следующая формулировка: "Исправлена запись многочисленных ошибок в журнал Оркестратора. Проблема воспроизводилась для конфигурации Windows Server 2016 + IIS + MSSQL".
Задача: https://azure-dos.s1.primo1.orch/PrimoCollection/Orchestrator/_boards/board/t/Orchestrator%20Team/Stories/?workitem=4152
1. Корректна ли формулировка: "Улучшен UX/UI раздела **Роботы > Все роботы**. При невозможности разблокировать робота система отобразит сообщение о возможных причинах".
для задачи https://azure-dos.s1.primo1.orch/PrimoCollection/Orchestrator/_boards/board/t/Orchestrator%20Team/Stories/?workitem=735


Вопросы Тимуру:

1. Почему у релизной задачи статус Removed?
https://azure-dos.s1.primo1.orch/PrimoCollection/Orchestrator/_boards/board/t/Orchestrator%20Team/Stories/?workitem=1053
- (1053) Пропадает очередь выполнения с проектов (в случайный момент)

Статус: не задокументирована.

2. Эта релизная задача готова или нет? Есть в редми у Макса
https://azure-dos.s1.primo1.orch/PrimoCollection/Orchestrator/_boards/board/t/Orchestrator%20Team/Stories/?workitem=4164

Статус: не задокументирована.
(4164) Исправлен баг с удалением больший секций логов


### Где найти
1. [Скачать комплект поставки Оркестратора:](https://disk.primo-rpa.ru/index.php/s/primo?path=%2FRelease%2FOrchestrator)
    * **Primo RPA Orchestrator 1.23.11 FULL.zip** - полный комплект поставки, в который входят дистрибутивы Оркестратора и внешних компонентов: например, базы данных PostgreSQL Server, брокера сообщений RabbitMQ и др. Вес дистрибутива ~ 3,5 Гб.
    * **Primo RPA Orchestrator 1.23.11.zip** - облегченный вариант поставки, весит ~ 1,1 Гб.

2. [Скачать дистрибутив Robot Enterprise](https://disk.primo-rpa.ru/index.php/s/primo?path=%2FRelease%2FRobot). Архив должен иметь название **Primo RPA Robot Orchestrator <архитектура> 1.23.11.zip**. Дистрибутив этого робота загружается непосредственно в Оркестратор.

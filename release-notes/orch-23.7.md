# Обновления в версии Оркестратора 23.7

Примечания к выпуску Оркестратора 23.7 описывают изменения для версии приложения, выпущенной в июле 2023 года.

### Новые функции
1. Добавлена трансляция активной RDP-сесии машины робота. Трансляция помогает быстрее понять, запустился ли робот, и чем он занят в текущий момент. Фунция не подразумевает перехват управления RDP-сессией и никоим образом не мешает ее работе. Запись видео не ведется. Чтобы трансляция была доступна в UI Оркестратора, у службы RDP2 должны быть установлены соответствующие настройки конфигурации. Просмотреть трансляцию можно в разделах:
   * **Настройки > Машины роботов > Все RDP-пользователи** выбранной машины. Окно трансляции вызывается из столбца **RDP-сессия активна** по кнопке **Консоль**.
   * **Все роботы** по нажатию кнопки **Консоль**. Опция доступна только, если робот и RDP-сесия активны.
3. Оптимизирована работа экземпляров Оркестратора при развертывании в одном кластере. Теперь в момент запуска им будет назначаться свой диапазон уникальных идентификаторов сущностей из базы данных. В результате мониторинг роботов, машин роботов и RDP-сессий со стороны Оркестратора будет выполняться быстрее.
4. Оптимизирована работа с RPA-проектами: больше не проверяется наличие файлов проекта на диске, поскольку их хранение перенесено в БД.
5. В БД стала фиксироваться временная приостановка машины робота: период, когда к серверу Оркестратора не подключена ни одна учетная запись робота. (ltools WorkerNoRdpPeriods)

### Исправленные ошибки
1. 2532 - не все пункты настроек доступны админу при AD-авторизации. Раньше при авторизации с доменной учеткой в UI некоторые пункты не отображались либо были недоступны для редактирования.
1. Для заданий с запуском по расписанию стала отображаться "Следующая дата по расписанию" сразу после создания задания. Ранее значение отображалось только после первого запуска задания.
1. (2064) Раббит не создает каналы в WebApi при старте. Иногда вебапи стартовал нормально, иногда нет. Оказалось, что в раббите есть каналы (иксченжи) и очереди обычные и автоудаляемые. И вот на автоудаляемых очередях и иксченжах вот эта штука происходила. У нас одни и те же очереди и иксченжи могут создаваться как Орком, так и сервис.робот.логс. Если сервис.робот.логс запускается раньше орка, то все создается нормально. А если вебапи стартовал раньше сервис.робот.логс, то возникал баг, и он начинал сыпать исключениями, и порой раббит даже все коннекшены обрывал. Теперь исправлено, разницы между стартами нет.
1. (2019) Шифровать ключевую фразу для сертификата p12 к раббиту. Был тикет, сделать, чтобы коннекшн с раббитом был с сичпо-м ссл. Для этого исп-ся сертификат P12 и для него исп-ся ключевая фраза. Кл фраза была сделана по тикету без шифрования, поэтому мог кто-нибудь посмотреть ее и приконектиться. У нас 5 сервисов, которые работают с раббитом, и на всех сервисах надо было зашифровать кл фразу. Все сделано. (должны быть внесены изменения в доку по SSL).
1. (2653/846) Не происходит снятие зависших блокировок триггеров, если временные зоны у орка и БД разные. На снятие блокировок есть сервис специальный, который обходит и проверяет. Возникла проблема: если вдруг Орк и БД находятся в разных временных зонах, то эти проверки не срабатывают. Ибо по умолчанию у нас подразумевается, что они в одной зоне. И тут проверка не срабатывала. Поправили, перешли на UTC, проблема исчезла. (с# при преобразовании в код на sql преобразует в код на дату машине - поэтому если у орка дата одна, а на машине другая, ранняя, то роботы начинают работать, устанавливать блокировки, то сервис должен снимать блокировки через таймаут. а тут время разное, снять блокировку невозможно, они накапливались. а потом когда останавливались задания, блокировки снимались и через час-два задания могли самопроизвольно выполняться. баг касался только постгреса)
1. При загрузке новой версии RPA-проекта не сохранялось указанное значение для параметра **Закрыть RDP-сессию**. Ошибка исправлена - состояние флага **Закрыть RDP-сессию**, установленное в момент загрузки версии, будет сохраняться и при ее активации.
1. Отображался неправильный HTTP-статус ответа при ошибке «Попытка изменить статус элемента другим роботом». Статус исправлен.



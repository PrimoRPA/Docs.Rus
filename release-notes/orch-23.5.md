# Обновления в версии Оркестратора 23.5

Примечания к выпуску Оркестратора 23.5 описывают изменения для версии приложения, выпущенной в мае 2023 года.

### Новые функции
1. Добавлен локальный Nuget-сервер, который может работать самостоятельно либо быть интегрирован с Оркестратором. Использование локального сервера может быть особенно важным для организаций с изолированной сетью. В случае, если Nuget-сервер интегрирован с Оркестратором, им возможно управлять через UI в разделе **Настройки > NuGet**. Управление доступно только пользователю с правами администратора. Он имеет возможность загружать на локальный сервер пакеты, которые взяты из публичного [NuGet](https://www.nuget.org/). Все добавленные пакеты будут доступны для использования в Primo Studio и Visual Studio. Руководство .... включено в комплект поставки.
1. Добавлена поддержка журнала для десктопных роботов (attended). Просмотр журнала доступен в разделе **Клиентские роботы** в UI Оркестратора. Клиентский робот идентифицируется в Оркестраторе по идентификатору задачи из Primo Robot Runner.
1. Десктопные роботы стали поддерживать работу с очередью обмена данными.
1. Добавлена возможность редактирования заданий. Изменение доступно по кнопке .... в соответствующем разделе.
1. Добавлена рассылка уведомлений с типом **Все события Оркестратора**. Подписка на уведомления создается администратором индивидуально для каждого пользователя в разделе **Настройки > Пользователи**. Рассылка осуществляется не по всем событиям, а только по тем, которые были заданы в конфигурационном файле службы States. Чтобы настроить список событий, следует указать их коды в параметре `AllEventsResolveList` в секции `RabbitMQ`.
1. Добавлена сортировка в список процессов проекта. (1654)
1. В названиях очередей обмена данными стали разрешены такие символы, как дефис, подчеркивание и точка.
6. Увеличено верхнее ограничение на интервал опроса ящика входящей почты до 10 минут.


1. Появились логи клиентских роботов - десктоп, attended (которые через раннер запускаются), они теперь пишут в Оркестратор свой журнал. Доступны в разделе меню **Клиентские роботы**. Как это настраивается на стороне Раннера? 
Идентифицируются в журнале своим ключом (?). код операции - это уникальный идентификатор проекта\операции, который он получает при каждом запуске роботом. присваивается проекту при старте выполнения. В раннере этот код стал формироваться недавно как раз для просмотра логов клиентских роботов (где его искать? это при создании задачи код? глянуть/спросить у Димы и тд).
Этот журнал почти идентичен журналу оркестраторных роботов. Отличие: у оркестраторных роботов есть информация, которая хранится в Орке, поэтому там побольше айдишников. 
КАКОЙ РОБОТ КЛИЕНТСКИЙ? Ответ Максима: когда через Раннер запускаем робота - в создании задачи на вкладке "Оркестратор" есть чекбокс "Клиентский" - он и определяет. Параметр "Издание" на той же вкладке не определяет вид робота: даже если стоит Интерпрайз, робот все равно будет считаться клиентским и логи будут писаться в соотв журнал.

Вопрос: как работают вместе настройки - отсутствие галки "Клиентский" и издание "Десктоп" или/ Интерпрайз? Или - если не стоит галка "Без Орка", но установлена галка "Клиентский"?

Чем СЕЙЧАС отличается у нас клиентский робот и неклиентский: по большому счету ничем, единственное - клиентский может вообще без Орка работать. Как следствие, далее: Оркестратор про клиентских роботов не знает ничего -> он никакую поддержку RDP-сессии сделать не сможет. 
На текущий момент клиентские роботы могут работать с очередями. С ассетами не умеют (будет добавлена). 

По уму: разница между десктоп и интерпрайз роботами должна быть только в одном - десктоп-роботы не запускаются с Орка (не в галочке "Клиентский"). В остальном это идентичная сущность.  
(разобраться что это значит - коммент от Алексея-блогера: десктоп-роботы не используют воркеры. У них воркером является текущая машина. И rdp - это текущий пользователь соответственно.)

Далее (ответ Димы): для чего в Раннере можно выбрать интерпрайз. Если выбрано, то робот забирает лицензию из Орка. Другой разницы нет, только в лицензиях. Но вообще десктопу желательно брать десктоп-лицензию. Интерпрайз он может запросить, если например нет десктоп-лицензии. Или если работают из Орка, и им нужно проверить, как это локально из раннера работает (?). Из раннера можно оркестраторный проект также запустить, также можно запустить и из Оркестратора этот проект. Зависит от настроек в раннере.

УТОЧНИТЬ ПРО АССЕТЫ В 23.5!! Добавили в итоге или нет работу с ними для клиентских роботов. + уточнить у Ильи, как называть таких роботов: клиентскими или десктопными.





**Терминология: идет от издания (десктоп, интерпрайз) или от чего (например, галки в раннере или дистрибутива)? Спросить у Ильи.**




### Исправленные ошибки

1. Исправлена ошибка с несрабатыванием триггера на новые элементы очереди, если интервал опроса задан в минутах. (1657)
1. 1676. Исправлена ошибка "Роботы с Оркестратора не стартуют, статус 75%" в сервисе проверки лицензий - у этой ошибки разные проявления, одно из них исправлено. Работа стала более надежной.
1. Исправлены ошибки:
   * с чтением из очереди с чекаутом.
   * в запросе элементов очереди.
4. ажур 1985. Исключено использование привязки Asset к RobotKey в методах v2. - потому что роботкей меняется. Теперь привязывается по id (чего именно?), ибо он не меняется. 
5. Исправлена ошибка с привязками ассетов к удаленным роботам (Disable).


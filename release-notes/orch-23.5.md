# Обновления в версии Оркестратора 23.5

Примечания к выпуску Оркестратора 23.5 описывают изменения для версии приложения, выпущенной в мае 2023 года.

### Новые функции
1. Появился локальный Nuget-сервер.
1. Добавлена поддержка логов для клиентских роботов - десктоп, attended (которые через раннер запускаются), они теперь пишут в Оркестратор свой журнал. Доступны в разделе меню **Клиентские роботы**.
1. Добавлена поддержка работы с очередями обмена для аттендед-роботов.
1. Рассылка по событиям с типом "Все" (список событий настраивается в конфиге).
1. Добавлена сортировка в список процессов проекта. (1654)
1. 1214. Добавлена возможность редактирования заданий в Оркестраторе.
1. 1779. Дефис, символ подчеркивания и точка разрешены в названиях очередей обмена.


1. Важно тем, у кого закрытый интернет - Появился локальный Nuget-сервер. Оркестратор может быть с ним интегрирован. Этот Nuget может использоваться самостоятельно, без Оркестратора - у него есть стандартные команды, можно через них . 
Управление локальным сервером NuGet через  UI Оркестратора доступно в разделе **Настройки > NuGet** - это если сервер интегрирован с Орком. Там будут отображаться все пакеты, которые залили из публичного NuGet (нугет орг). Все эти пакеты можно использовать в Студиях: Примо и Visual Studio. Только админ сейчас грузит эти пакеты в Орке.
 
В некоторых случаях клиенты работают в изолированных средах, где возможность публиковать и устанавливать пакеты для VS и Primo Studio через интернет невозможна (или запрещена). В качестве решения - использованоия локального NuGet-сервера. 
Причем интерфейс локального NuGet-сервера должен быть стандартным, без необходимости доработки на стороне Primo Studio)

подготовлена информация (документация) по работе с UI локального NuGet сервера (как добавить пакет, доступ и прочее)

Как добавлять подключение к локальному серверу в Студии: 
1. Открыть Файл > Настройки > Network > Nuget и по кнопке плюс добавить сервер (новый источник для NuGet). Название произвольное (вроде как - уточнить правила, наличие пробелов, дефисы). Эта настройка в студии уже существовала, ее стоит описать подробнее (таска с описанием настроек Студии - поискать документ/ответ Димы).
Для скачивания пакета всегда должен быть интернет? или как это работает...


1. Появились логи клиентских роботов - десктоп, attended (которые через раннер запускаются), они теперь пишут в Оркестратор свой журнал. Доступны в разделе меню **Клиентские роботы**. Как это настраивается на стороне Раннера? 
Идентифицируются в журнале своим ключом (?). код операции - это уникальный идентификатор проекта\операции, который он получает при каждом запуске роботом. присваивается проекту при старте выполнения. В раннере этот код стал формироваться недавно как раз для просмотра логов клиентских роботов (где его искать? это при создании задачи код? глянуть/спросить у Димы и тд).
Этот журнал почти идентичен журналу оркестраторных роботов. Отличие: у оркестраторных роботов есть информация, которая хранится в Орке, поэтому там побольше айдишников. 
КАКОЙ РОБОТ КЛИЕНТСКИЙ? Ответ Максима: когда через Раннер запускаем робота - в создании задачи на вкладке "Оркестратор" есть чекбокс "Клиентский" - он и определяет. Параметр "Издание" на той же вкладке не определяет вид робота: даже если стоит Интерпрайз, робот все равно будет считаться клиентским и логи будут писаться в соотв журнал.

Вопрос: как работают вместе настройки - отсутствие галки "Клиентский" и издание "Десктоп" или/ Интерпрайз? Или - если не стоит галка "Без Орка", но установлена галка "Клиентский"?

Чем СЕЙЧАС отличается у нас клиентский робот и неклиентский: по большому счету ничем, единственное - клиентский может вообще без Орка работать. Как следствие, далее: Оркестратор про клиентских роботов не знает ничего -> он никакую поддержку RDP-сессии сделать не сможет. 
На текущий момент клиентские роботы могут работать с очередями. С ассетами не умеют (будет добавлена). 

По уму: разница между десктоп и интерпрайз роботами должна быть только в одном - десктоп-роботы не запускаются с Орка (не в галочке "Клиентский"). В остальном это идентичная сущность.  
(разобраться что это значит - коммент от Алексея-блогера: десктоп-роботы не используют воркеры. У них воркером является текущая машина. И rdp - это текущий пользователь соответственно.)

Далее (ответ Димы): для чего в Раннере можно выбрать интерпрайз. Если выбрано, то робот забирает лицензию из Орка. Другой разницы нет, только в лицензиях. Но вообще десктопу желательно брать десктоп-лицензию. Интерпрайз он может запросить, если например нет десктоп-лицензии. Или если работают из Орка, и им нужно проверить, как это локально из раннера работает (?). Из раннера можно оркестраторный проект также запустить, также можно запустить и из Оркестратора этот проект. Зависит от настроек в раннере.

УТОЧНИТЬ ПРО АССЕТЫ В 23.5!! Добавили в итоге или нет работу с ними для клиентских роботов. + уточнить у Ильи, как называть таких роботов: клиентскими или десктопными.





**Терминология: идет от издания (десктоп, интерпрайз) или от чего (например, галки в раннере или дистрибутива)? Спросить у Ильи.**




### Исправленные ошибки

1. Исправлена ошибка с несрабатыванием триггера на новые элементы очереди, если интервал опроса задан в минутах. (1657)
1. 1676. Исправлена ошибка "Роботы с Оркестратора не стартуют, статус 75%" в сервисе проверки лицензий.
1. Исправлена ошибка с чтением из очереди с чекаутом.
1. Исправление багов в запросе элементов очереди.
1. ажур 1985. Исключено использование привязки Asset к RobotKey в методах v2. 
1. Исправлена ошибка с привязками ассетов к удаленным роботам (Disable).
1. Увеличено верхнее ограничение на интервал опроса ящика входящей почты до 10 минут.

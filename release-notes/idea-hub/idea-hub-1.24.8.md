# Idea Hub 1.24.10

Представляем список изменений для Primo RPA Idea Hub, которые вошли в версию 1.24.10.

с презы:

1. Существенно упростили загрузку данных в карточки процессов за счет того, что теперь все шаблоны динамические и пользовательские поля в них автоматически создаются. 
1. Сделали намного более гибким вывод данных - теперь вы можете настраивать все иконки, какие поля нужно показывать на какой карточке, в каком виде их показывать. 
1. В ИХ теперь можно собирать данные из разных источников данных. Это могут быть и журналы процессов (не обя-но в Орке, можно и из внешней БД), это и метаданные из очередй, и сами очереди, и можно к одному процессу привязывать много очередй.
1. Раньше все эффекты рассчитывались по определенным формулам. Теперь доработка позволяет делать исторчиески серии данных, которая позволяет указывать, мол, в этом году зп были такие, в этом другие, и за счет этого можем получать намного более точное моделирование. Подсчет данных, которые изменяются со временем. В связи с этим мы доработали механизм формул, теперь в них намного более гибкие возможности. Например, можем добавлять комментарии, улучшили визуализацию данных в редакторе и поработали над удобством создания формул.



## Обновления

### Новые дашборды

Обновили внешний вид дашбордов и упростили способ их создания:
* Появилась возможность создавать произвольное количество страниц с дашбордами. 
* На странице дашборда предзаданы панели с метриками — каждая панель доступна для редактирования. Метрики в панели отображаются в более понятном и приятном виде.
* Вы можете легко настроить общее количество панелей и их внешний вид. Самостоятельно изменить иконки, текст, цвет для каждой метрики без привлечения разработчиков Idea Hub.
* Для дашбордов появилась фильтрация по департаментам и по датам. Функция позволяет отображать дашборды только для связанных с ними департаментов. 

![](<../../.gitbook/assets1/idea-hub/dashboards-24-10.png>)


### Ежедневный сбор статистики

Теперь статистика запусков проектов и обработки элементов очередей стала собираться ежедневно. Новый механизм сбора статистики позволяет более гибко и точно рассчитывать эффекты от автоматизации:
* Теперь вы можете просмотреть эффект в разрезе любого дня или периода, поскольку вся статистика датируется.
* Стало возможным не учитывать в статистике периоды тестовых запусков.
* (в случае неполадок с подключением к орку?) реальная запись может произойти позже в том числе за какую-то дату.


### Улучшенные формулы

Сделали работу с формулами понятнее и удобнее:
* Добавили поддержку переменных в полях формул. Теперь вы можете определить переменные, которые хотите использовать в расчетах, используя синтаксис YAML. Использование переменных упрощает написание сложных формул и повышает их читаемость. 
* Добавили возможность оставлять комментарии, чтобы упростить понимание и поддержку сложных формул. Комментарии проигнорируются при выполнении формулы, но останутся видимыми для всех, кто с ней работает. Для комментариев используется синтаксис `//Комментарий к формуле`.
* При вводе формул стали доступны подсказки. Система автоматически отобразит подсказки для указанного значения. Кроме того, стали доступны операторы:
     * `@F` — просмотр списка всех доступных пользователю функций. **Уточнить про регистр и конечный синтаксис у Кости**
     * `@E` — просмотр списка всех доступных пользователю сущностей. Например, очередей, лицензий, процессов и т.д.
* Ускорили вычисление формул. 

(взять скрин из видео 3 - создание материала параметр)


### Гибкое управление статистикой проектов

Добавили предупреждение о создании в Оркестраторе проекта с именем, которое уже используется в процессе Idea Hub. Новая функция позволит избежать некорректных данных за счет возможности принимать обоснованные решения по управлению статистикой. Теперь вы можете самостоятельно определить, следует ли объединять данные по одноименным проектам в одном процессе или создать новый процесс для их учета.

В дополнение к этому:
* Перестали учитывать в статистике запусков данные по версиям проекта - вместо этого отображаются общие данные по всем версиям.
* Обновили представление статистики запусков проекта: (скрин общее количество запусков, кол-во успешных запусков, кол-во запусков с ошибками, кол-во запусков с исключениями). 









### Комбинированная статистика

1. Компановка процесса в один. (Возможность объединить несколько процессов/ Компановка очередей в один процесс). https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_boards/board/t/IdeaHub%20Team/Stories


   Если кол-во очередей в процессе больше одной, необходимо разбить статистику по каждой очереди с вынесением эффектов во вкладку расчитанные эффекты ( сейчас считается только по первой очереди)
   https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25882

   Для бизнес-процессов с несколькими очередями Оркестратора (**или проектов тоже?**) появилась возможность выводить комбинированную статистику. Для этого в рассчитанных эффектах процесса появились поля, где можно ввести формулу с указанием всех необходимых очередей, по которым следует суммировать показатели в статистике процесса.

   Это поля со следующими машинными именами:
   * **Ops_total** — формула для показателя Общее количество операций.  
   * **Ops_success** — формула для показателя Количество успешных операций.
   * **Ops_error** — формула для показателя Количество бизнес-ошибок.
   * **Ops_exception** — формула для показателя Количество исключений.
   * **Ops_avg_duration** — формула для показателя Среднее время длительности операций.

   По умолчанию статистика выводится по первой привязанной к процессу очереди.

В этом поле мы можем обращаться либо к очередям, либо к проектам...

Если к процессу привязаны и очереди, и проекты, то в дашборде можно выбрать, по чему конкретно будет выводиться статистика - из очереди или из проектов. 



Показатели, которые нам нужны для очереди и для проектов. Это общие показатели:

Процесс:
Количество операций
Количество успешных операций
Количество бизнес-ошибок
Количество исключений (когда робот написан криво и не смог обработать какую-то операцию и повис/сломался)
Среднее время длительности операций

У очередей не операции, а обработка элемента очереди.

Очереди (1 элемент очереди = 1 транзакция = 1 операция):
Количество обработанных элементов очередей (транзакций)
Количество успешно обработанных
Количество с бизнес-ошибок
Количество исключений (когда робот написан криво и не смог обработать какую-то операцию и повис/сломался)
Среднее время длительности операций

Проекты (1 операция = 1 запуск проекта):
Время выполнения проекта (время запуска)

Эти данные мы собрали из Орка и сохранили в статистику. В идеале в одном процессе есть одна очередь. Но у клиентов часто к одному процессу привязано много очередей. 


//(К процессу в ИХ можно присоединить множество очередей, произвольное количество. И в одном бизнес-процессе используется десяток очередей, это проблема для показателей статистики. Как посчитать? Для таких ситуаций придумали вот что: при наличии нескольких очередей в процессе, по умолчанию статистика будет высчитываться по первой очереди. Если у клиента одна очередь, то ему дополнительно делать ничего не нужно. Если несколько очередей, то в формуле статистики можно ссылаться на любые сущности, которые привязаны к процессу. Например, мы можем суммировать показатели нескольких очередей. В ИХ есть функция queue_meerge(). То есть на выходе получится объединенная статистика по важным очередям (выбранным). Клиенты сами должны будут вписать эти очереди в формулу (илии обратиться к техподдержке). 
Формула прописывается в полях процесса (Редактирование процесса > Рассчитанные эффекты). Там появится поле, которое называется **Ops_total**. В этом поле можно комбинировать очереди и комбинировать показатели. 


1. Реализовать связь между материалом типа Очередь с соответствующей статистикой в хранилище  https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25887

1. Добавить возможность управлять "дельтами" https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25146

1. Реализовать связь между материалом типа Проект с соответствующей статистикой в хранилище  https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25886

### тоже стата
25888  разбить статистику по запускам очередей...
посмотреть эту задачу. там про эксель тоже (корневая).




### Другое
25882

Мы добавили возможность использовать в расчетах статистику по разным прикрепленным к процессу очередям. Это означает, что к одному процессу мб подключено произвольное кол-во очередей и проектов. Чтобы посчитать показатели эффективности, мы можем делать сложные расчеты внутри формул путем комбинации данных из разных очередей. 
это возможность использовать статистику из разных очередей. раньше так нельзя было сделать.



### Экспорт данных в Excel

1. 26204 Некст - мы теперь можем выгрузить статистику по очередям и проектам (стата запусков) в файл Excel за определенный период времени. Период - это фильтр: либо произвольные дата начала/дата окончания, либо выбрать период (например, квартал, календарный месяц и тд). 

посмотреть задачу, выцепить что-нибудь полезное.


1. Добавлена возможность выгружать процессы в Excel. Функция может быть полезна для формирования соответствующих отчетов в организации. (ОМК)


### Настройка доступа к полям процесса

1. Добавлена возможность управлять доступом к полям процесса. **Какие разрешения появились, подробнее расписать, как настраиваются** https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25778

Права доступа к процессам по департаментам
25856
25717

уточнить про статус задачи. 

частично сделали:


можно настроить процессы таким образом чтобы определенные поля показывались только определенным ролям. Ролевая модель доступа.


заходим в процесс, настраиваем для каждого поля разрешения.




### Управление отображением числовых значений

1. Для числовых полей появилась настройка, которая позволяет управлять отображением значений. Теперь вы можете установить конкретное число, начиная от которого значения необходимо автоматически сворачивать. Ранее значения автоматически сворачивалась, если сумма в поле была больше миллиона. Благодаря новой функции, вы можете снизить этот порог.   https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25747








1. Реализовать возможность создания произвольные типы комплексных полей https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25749

1. Добавить новое рассчитываемое поле https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25138

1. Добавить новую пользовательскую функцию  (что за функция?) https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25135

1. Добавить возможность управлять разделителями баджей в краткой версии карточек процессов https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25180

1. Добавить в представления "No result" https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25375

1. Перенести список департаментов из демо inner https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25396

1. Исправить правила обновления сервера staging https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/26557

1. Сохранять получаемые из текущего оркестратора данные в новое датированное хранилище https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25121

1. Перенести добавление t() в stagin для доступных значений поля "Период операций"  https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25127

1. Организация хранения обязательных датированных данных от системы RPA   https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25061

1. Перенести функциональность миграции RateAndHumanDuration в модуль поля PrimoComplex https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/20670






## Исправленные ошибки

1. Исправлена ошибка, из-за которой не обновлялась иконка пользователя в меню. Ранее иконка корректно обновлялась только у администратора. https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25750
1. Исправлена ошибка в миграции, из-за которой департаменты не обновлялись корректно. https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25748
1. ПОЯСНИТЬ (ЧТО ТАКОЕ ТИЗЕР, КАКИЕ ДИСПЛЕИ ИМЕЮТСЯ В ВИДУ) Исправлена ошибка, из-за которой нельзя было изменить иконки в тизере. Теперь в любом дисплее можно настроить иконки для полей процесса.  https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/24291
1. Исправлена ошибка, из-за которой экспорт процессов завершался ошибкой при отсутствии департамента, привязанного к процессу.  https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/26209
1. Исправлена ошибка, из-за которой не работал поиск в английской версии сайта. https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/15583
1. Решена проблема, из-за которой на странице очередей не работали региональные настройки.  https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/25022

1. Ошибка при запуске крона primo_migrate_node_license_presave()->getTimestamp https://azure-dos.s1.primo1.orch/PrimoCollection/IdeaHub/_workitems/edit/23241


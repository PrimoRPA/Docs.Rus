# Idea Hub 25.4

Список изменений для версии 25.4, выпущенной в апреле 2025-го года.


### Импорт данных из Оркестратора без скрипта get_data

Теперь вы можете импортировать данные из БД Оркестратора без использования скрипта **get_data**. Для реализации этой возможности был добавлен новый тип источника импорта — `SQL`. Выбрать данный источник возможно на странице [настроек контура](https://docs.primo-rpa.ru/ru/idea-hub/installation/initial-setup/environments), в параметрах импортёра Primo RPA Global.

В результате выполненых настроек Idea Hub будет самостоятельно обращаться в БД Оркестратора по времени, настроенному в cron, и забирать актуальные данные. Настраивать скрипт `get_data.sh` или `get_data.ps1` в этом случае не нужно.

![](<../../release-notes/resources/idea-hub/25-4/sql-importer.png>)


### Правила доступа к данным

Для гибкого управления доступом разработали специальные *правила доступа*, которые позволяют разграничить:
* Доступ к объектам (процесс, проект, очередь, робот, машина, лицензия, дашборд) и их полям. 
* Доступ к терминам словаря таксономии и их полям.

С помощью правил вы можете определить, какие операции разрешены для пользователей. Например: чтение, создание, обновление, удаление.

**Типы правил:**
* **Роль** — доступ предоставляется пользователям с определённой ролью. Например, *Авторизованный пользователь*.
* **Пользователь** — доступ предоставляется выбранному пользователю.
* **То же значение** — доступ предоставляется тем пользователям, у которых значение выбранного поля из учётной записи совпадает со значением выбранного поля у объекта/термина/поля. 
* **Термин таксономии, выбранный для пользователя** — доступ к определённому термину таксономии предоставляется пользователям, у которых этот термин указан в поле учётной записи.

Вы можете настроить несколько правил доступа для каждой операции. В этом случае доступ будет предоставлен пользователям, соответствующим хотя бы одному правилу.

### Автоматический перенос полей идеи в будущий процесс

Появилась возможность настраивать, значения каких полей требуется автоматически переносить из идеи в созданный процесс.

По умолчанию, из идеи в соответствующий процесс переносятся только значения следующих полей:
* `title` ​— название процесса;
* `body` ​— описание процесса;
* `field_area` ​— департамент, к которому относится процесс;
* `field_systems` ​— программные системы, задействованные в процессе.

Теперь вы можете выполнить предварительную настройку полей идеи таким образом, чтобы все нужные вам значения переносились в будущий процесс. Настройки выполняются в административном меню согласно [данной инструкции](https://github.com/PrimoRPA/Docs.Rus/blob/2266-%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B2-%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D0%B8-%D0%B4%D0%BB%D1%8F-%D1%80%D0%B5%D0%BB%D0%B8%D0%B7%D0%B0-ih-254/idea-hub/admin/structure/webform.md).


### Улучшенная форма создания пользователя

Упростили форму создания/редактирования пользователя, убрав неиспользуемые параметры и изменив внешний вид страницы. Теперь все параметры представлены на одной странице без группировки по вкладкам.

###

Теперь для поля "Оркестратор подключен" и функция "process.count_areas_with_robot" можно настроить список статусов.

Сейчас метод \Drupal\primo_process\ComputedFieldHandler\OrchConnected::isStatusAllowed обрабатывает два статуса, которые содержаn слова "production" и "stopped". Нужно, чтобы эти слова можно было настраивать через конфигурацию. На текущем этапе, можжно указать конфигурацию через файл settings.php, например так "$conf['primo_process']['orch_connected_status_list'] = 'production, stopped';"

Эту конфигурацию получать в указанном методе, и использовать указанные через запятую слова в качестве фильтра.

--------
Появилась возможность настроить статусы для поля **Оркестратор подключён**, если клиент изменил стандартный набор.

У проекта в файле `settings.example.php` есть такие строки:

Поле "Оркестратор подключен" использует оба значения. То есть если у процесса есть статистика и его статус в одном из двух полей, будет написано что "Оркестратор подключен - да"



## Исправленные ошибки

1. Исправлена ошибка, из-за которой библиотека панелей, необходимая для работы дашбордов, поддерживала только русский язык. Теперь вы можете импортировать русские или английские панели, в зависимости от языка по умолчанию.
1. Исправлена ошибка с импортом поля **human_duration** для файла `process.xlsx`. Из шаблона файла удалено устаревшее поле **duration**.
1. Исправлена ошибка, из-за которой открытие главной страницы могло завершаться ошибкой.
1. Решена проблема, из-за которой некоторые десятичные числа могли вызывать ошибку, хотя являлись допустимыми.


## Дистрибутив
Idea Hub 25.4 доступен по [ссылке](https://disk.primo-rpa.ru/index.php/s/t9BHBjR6PP06Yax?path=%2FRelease%2FIdeaHub):
* `idea-hub.install.25.4.0.linux.tar` — архив для установки с Idea Hub нуля;
* `idea-hub.update.25.4.0.linux.tar` — архив для обновления Idea Hub.
